---
layout:  post
category:  hunting_job
title: 84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢
tagline:  by é˜¿ç§€
tags:
    - åŸåˆ›
    - LeetCode
    - æ ¡æ‹›
    - ç¤¾æ‹›
    - é˜¿ç§€
excerpt: 84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢
comment: false
---





<div style="border-color: #24C6DC;
            background-color: #e9f9f3;         
            margin: 1rem 0;
        padding: .25rem 1rem;
        border-left-width: .3rem;
        border-left-style: solid;
        border-radius: .5rem;
        color: inherit;">
  <p>è¿™æ˜¯å››åˆ™æˆ–è®¸å¯¹ä½ æœ‰å¸®åŠ©çš„è®¯æ¯</p>
  <p>1ã€ğŸ‘‰ æœ€è¿‘æˆ‘å‘ç°äº†ä¸€ä¸ªæ¯æ—¥éƒ½ä¼šæ¨é€æœ€æ–°æ ¡æ‹›èµ„è®¯çš„ã€Šæ ¡æ‹›æ—¥ç¨‹ã€‹æ–‡æ¡£ï¼Œå…¶ä¸­åŒ…æ‹¬<a style="text-decoration: underline" href="https://flowus.cn/share/ee50d5eb-3cd5-4f74-880e-95b215dd4ff2" target="_blank">å¾€å±Šè¡¥å½•</a>ã€<a style="text-decoration: underline" href="https://flowus.cn/share/5f327c98-1e31-46c8-b86b-5ac6105e021f" target="_blank">åº”å±Šå®ä¹ æ ¡æ‹›</a>ä¿¡æ¯,æ¯”å¦‚å„ç§å¤§å‚ã€å›½ä¼ã€é“¶è¡Œã€äº‹ä¸šç¼–ç­‰ä¿¡æ¯éƒ½ä¼šå®šæœŸæ›´æ–°ï¼Œå¸®å¿™æ‰©æ•£ä¸€ä¸‹ã€‚</p>  
  <p>2ã€ğŸ˜
    å…è´¹åˆ†äº«é˜¿ç§€ä¸ªäººå­¦ä¹ è®¡ç®—æœºä»¥æ¥çš„æ”¶é›†åˆ°çš„å…è´¹èµ„æºï¼Œ<a style="text-decoration: underline" href="/notes/07-resources/01-free/01-introduce.html" target="_blank">ç‚¹æ­¤ç™½å«–</a>ã€‚
  </p>
  <p>3ã€ğŸš€å¦‚æœä½ æƒ³åœ¨æ ¡æ‹›ä¸­é¡ºåˆ©æ‹¿åˆ°æ›´å¥½çš„offerï¼Œé˜¿ç§€å»ºè®®ä½ å¤šçœ‹çœ‹å‰äºº<a style="text-decoration: underline" href="https://www.yuque.com/tuobaaxiu/httmmc/npg1k81zeq4wfpyz" target="_blank">è¸©è¿‡çš„å‘</a>å’Œ<a style="text-decoration: underline"  target="_blank" href="https://www.yuque.com/tuobaaxiu/httmmc/gge9ppd0mbu2d3dp">ç•™ä¸‹çš„ç»éªŒ</a>ï¼Œäº‹å®ä¸Šä½ ç°åœ¨é‡åˆ°çš„å¤§å¤šæ•°é—®é¢˜ä½ çš„å­¦é•¿å­¦å§å¸ˆå…„å¸ˆå§åŸºæœ¬éƒ½å·²ç»é‡åˆ°è¿‡äº†ã€‚
  </p>
  <p>4ã€ğŸ”¥ æ¬¢è¿å‡†å¤‡è®¡ç®—æœºæ ¡æ‹›çš„å°ä¼™ä¼´åŠ å…¥æˆ‘çš„<a  style="text-decoration: underline" href="https://www.yuque.com/tuobaaxiu/httmmc/xg0otqvc17wfx4u9" target="_blank">å­¦ä¹ åœˆå­</a>ï¼Œä¸€ä¸ªäººè¸½è¸½ç‹¬è¡ŒçœŸçš„ä¸å¦‚ä¸€ç¾¤äººæŠ¥å›¢å–æš–ï¼Œè¿‡å»22å±Šå’Œ23å±Šçš„å°ä¼™ä¼´å¥½å¥½è·Ÿç€èµ°ä¸‹å»çš„ï¼Œæœ€ååŸºæœ¬éƒ½æ‹¿åˆ°äº†ä¸é”™çš„offerï¼å¦‚æœä½ éœ€è¦ã€Šé˜¿ç§€çš„å­¦ä¹ ç¬”è®°ã€‹ç½‘ç«™ä¸­ğŸ“šï¸æ ¡æ‹›å…«è‚¡æ–‡ç›¸å…³çŸ¥è¯†ç‚¹çš„PDFç‰ˆæœ¬çš„è¯ï¼Œå¯ä»¥<a style="text-decoration: underline" href="/notes/08-other/02-question.html#_5ã€å¦‚ä½•ä¸‹è½½é˜¿ç§€çš„å­¦ä¹ ç¬”è®°å†…å®¹pdfç‰ˆæœ¬" target="_blank">ç‚¹æ­¤ä¸‹è½½</a> ã€‚</p>   </div>


<p id="æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢"></p>



## 84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢ å•è°ƒæ ˆï¼Œå¾ˆç»å…¸çš„é¢˜ç›®

[åŠ›æ‰£åŸé¢˜é“¾æ¥ï¼ˆç‚¹æˆ‘ç›´è¾¾ï¼‰](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/)

ç»™å®š *n* ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚

æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

 

![](https://axiu-image-bed.oss-cn-shanghai.aliyuncs.com/img/202207032130915.png)

ä»¥ä¸Šæ˜¯æŸ±çŠ¶å›¾çš„ç¤ºä¾‹ï¼Œå…¶ä¸­æ¯ä¸ªæŸ±å­çš„å®½åº¦ä¸º 1ï¼Œç»™å®šçš„é«˜åº¦ä¸º `[2,1,5,6,2,3]`ã€‚

 

![](https://axiu-image-bed.oss-cn-shanghai.aliyuncs.com/img/202207032131564.png)

å›¾ä¸­é˜´å½±éƒ¨åˆ†ä¸ºæ‰€èƒ½å‹¾å‹’å‡ºçš„æœ€å¤§çŸ©å½¢é¢ç§¯ï¼Œå…¶é¢ç§¯ä¸º `10` ä¸ªå•ä½ã€‚

 

**ç¤ºä¾‹:**

```
è¾“å…¥: [2,1,5,6,2,3]
è¾“å‡º: 10
```





### ç¬¬ä¸€ç‰ˆï¼Œçœ‹çš„è§£ç­”ï¼Œå•è°ƒæ ˆ

è§£æï¼š

https://blog.csdn.net/Zolewit/article/details/88863970

æ‰§è¡Œç”¨æ—¶ :16 ms, åœ¨æ‰€æœ‰ cpp æäº¤ä¸­å‡»è´¥äº†78.93%çš„ç”¨æˆ·

å†…å­˜æ¶ˆè€— :10.4 MB, åœ¨æ‰€æœ‰ cpp æäº¤ä¸­å‡»è´¥äº†52.48%çš„ç”¨æˆ·



```c++
int largestRectangleArea(vector<int>& heights) {
	stack<int> st;
	heights.push_back(0);
	int res = 0,temp;
	for (int i = 0; i < heights.size(); ++i) {
		while (!st.empty() && heights[st.top()] >= heights[i]) {
			cout << st.top() << " å‡ºæ ˆ,å¤§å°ä¸º" << heights[st.top()] << endl;;
			temp = st.top();
			st.pop();
			res = max(res, heights[temp] * (st.empty() ? i : (i - st.top() - 1)));
			cout << "maxS:" << res << endl;
		}
		st.push(i);
		cout << i << " è¿›æ ˆï¼Œå¤§å°ä¸º" << heights[i] << endl;
	}
	return res;


```



0 è¿›æ ˆï¼Œå¤§å°ä¸º2
0 å‡ºæ ˆ,å¤§å°ä¸º2
maxS:2
1 è¿›æ ˆï¼Œå¤§å°ä¸º1
2 è¿›æ ˆï¼Œå¤§å°ä¸º5
3 è¿›æ ˆï¼Œå¤§å°ä¸º6
3 å‡ºæ ˆ,å¤§å°ä¸º6
maxS:6
2 å‡ºæ ˆ,å¤§å°ä¸º5
maxS:10
4 è¿›æ ˆï¼Œå¤§å°ä¸º2
5 è¿›æ ˆï¼Œå¤§å°ä¸º3
5 å‡ºæ ˆ,å¤§å°ä¸º3
maxS:10
4 å‡ºæ ˆ,å¤§å°ä¸º2
maxS:10
1 å‡ºæ ˆ,å¤§å°ä¸º1
maxS:10
6 è¿›æ ˆï¼Œå¤§å°ä¸º0
10è¯·æŒ‰ä»»æ„é”®ç»§ç»­. . .





### äºŒåˆ·ï¼š1ã€æš´åŠ›æ³•è¶…æ—¶äº†

~~~cpp
    int largestRectangleArea(vector<int>& heights) {
        int len=heights.size();
        if(len==0) return 0;
        if(len==1) return heights[0];
        int maxArea = -1;
        for(int i=0;i<len;++i){

            int curHeight = heights[i];
            for(int j=i;j<len;++j){

                if(curHeight>heights[j]) curHeight = heights[j];
                int area = curHeight*(j-i+1);
                if(maxArea<area) maxArea = area;

            }

        }
        return maxArea;
    }
~~~

### äºŒåˆ·2ã€è¿™ç§åšæ³•çœŸçš„è¶…çº§å¥½ï¼Œè¦å–„äºåˆ©ç”¨ä»¥å‰çš„ç»“æœ

### 2.1åŸç”Ÿç‰ˆæš´åŠ›æ³•è¶…æ—¶

~~~cpp
 int largestRectangleArea(vector<int>& heights) {
	int len = heights.size();
	if (len == 0) return 0;
	if (len == 1) return heights[0];
	int maxArea = -1;
	vector<int> left(len, 0), right(len, 0);//æ¯ä¸ªèŠ‚ç‚¹å·¦å³ä¸¤è¾¹èƒ½åˆ°è¾¾ä¸å°äºè‡ªå·±é«˜åº¦çš„æœ€å¤§è·ç¦»
	for (int i = 0; i < len; ++i) {

		int bound = i;
		while (bound - 1 >= 0 && heights[bound - 1] >= heights[i]) bound--;
		left[i] = bound;

		bound = i;
		while (bound + 1 < len && heights[bound + 1] >= heights[i]) bound++;
		right[i] = bound;
	}

	for (int i = 0; i < len; ++i) {
		maxArea = max(maxArea, (right[i] - left[i] + 1) * heights[i]);
		//cout << (right[i] - left[i] + 1) * heights[i]<<" "<<maxArea << endl;
	}
	return maxArea;
    }
~~~



### 2.2æ”¹è‰¯ç‰ˆ

æ‰§è¡Œç”¨æ—¶ï¼š4 ms, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†99.99%çš„ç”¨æˆ·

å†…å­˜æ¶ˆè€—ï¼š8.1 MB, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ·

~~~cpp
int largestRectangleArea(vector<int>& heights) {
	int len = heights.size();
	if (len == 0) return 0;
	if (len == 1) return heights[0];
	int maxArea = -1;
	vector<int> left(len, 0), right(len, 0);//æ¯ä¸ªèŠ‚ç‚¹å·¦å³ä¸¤è¾¹èƒ½åˆ°è¾¾ä¸å°äºè‡ªå·±é«˜åº¦çš„æœ€å¤§è·ç¦»
	for (int i = 0; i < len; ++i) {

		int bound = i;
		while (bound > 0 && heights[bound - 1] >= heights[i]) bound=left[bound-1];//ï¼Œå¦‚æœè¯´bound -1 çš„å€¼å·²ç»å¾ˆå°äº†ï¼Œç›´æ¥ç”¨å°±è¡Œï¼Œå°±ä¸ç”¨å†è‡ªå·±æ…¢æ…¢éå†äº†ï¼Œå·¦è¾¹æœ€å°å°±æ˜¯0äº†ï¼Œå³è¾¹æœ€å¤§ä¹Ÿå°±æ˜¯len-1
		//è¦å–„äºåˆ©ç”¨å·²ç»å¾—åˆ°çš„ç»“æœ
		left[i] = bound;
	}

	for (int i = len-1; i >=0 ; --i) {
		int bound = i;
		while (bound < len - 1 && heights[bound + 1] >= heights[i]) bound = right[bound + 1];
		right[i] = bound;
	}
	for (int i = 0; i < len; ++i) {
		maxArea = max(maxArea, (right[i] - left[i] + 1) * heights[i]);
	}
	return maxArea;
}
~~~





### ä¸‰åˆ·ï¼š

~~~cpp
    int largestRectangleArea(vector<int>& heights) {
        int len = heights.size();
        if(len == 0) return 0;
        if(len == 1) return heights[0];
        int maxArea = -1, bound = 0;
        vector<int> left(len,0), right(len,0);
        for(int i = 0; i <= len-1; ++i){
            bound = i;
            while(bound >=1 && heights[bound - 1] >= heights[i]) bound = left[bound - 1];
            left[i] = bound;

        }

        for(int i = len - 1; i >= 0; --i){
            bound = i;
            while(bound <len - 1 && heights[bound + 1] >=heights[i]) bound = right[bound + 1];
            right[i] = bound;

        }

        for(int i = 0; i < len; ++i){
            maxArea = max(maxArea,(right[i] - left[i] +1 ) * heights[i]);
        }

        return maxArea;
    }
~~~

<p id="æœ€å¤§çŸ©å½¢"></p>



