(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{461:function(t,s,e){"use strict";e.r(s);var a=e(62),v=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{align:"center"}},[t._v("Redis")]),t._v(" "),e("p",{attrs:{id:"æ•°æ®åº“ç¬¬äºŒéƒ¨åˆ†"}}),t._v(" "),e("div",{staticStyle:{"border-color":"#24C6DC","background-color":"#e9f9f3",margin:"1rem 0",padding:".25rem 1rem","border-left-width":".3rem","border-left-style":"solid","border-radius":".5rem",color:"inherit"}},[e("p",[t._v("è¿™æ˜¯å…­åˆ™æˆ–è®¸å¯¹ä½ æœ‰äº›è®¸å¸®åŠ©çš„ä¿¡æ¯:")]),t._v(" "),e("p",[t._v("â­ï¸1ã€é˜¿ç§€ä¸æœ‹å‹åˆä½œå¼€å‘äº†ä¸€ä¸ª"),e("span",{staticStyle:{"font-weight":"bold",color:"red"}},[t._v("ç¼–ç¨‹èµ„æºç½‘ç«™")]),t._v("ï¼Œç›®å‰å·²ç»æ”¶å½•äº†å¾ˆå¤šä¸é”™çš„å­¦ä¹ èµ„æºå’Œé»‘ç§‘æŠ€ï¼ˆé™„å¸¦ä¸‹è½½åœ°å€ï¼‰ï¼Œå¦‚è¿‡ä½ æƒ³è¦å¯»æ±‚åˆé€‚çš„ç¼–ç¨‹èµ„æºï¼Œ"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://tools.interviewguide.cn/home",target:"_blank"}},[t._v("æ¬¢è¿ä½“éªŒ")]),t._v("ä»¥åŠæ¨èè‡ªå·±è®¤ä¸ºä¸é”™çš„èµ„æºï¼Œä¼—äººæ‹¾æŸ´ç«ç„°é«˜ï¼Œæˆ‘ä¸ºäººäººï¼Œäººäººä¸ºæˆ‘ğŸ”¥ï¼")]),t._v(" "),e("p",[t._v("2ã€ğŸ‘‰23å¹´5æœˆä»½é˜¿ç§€ä»"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://mp.weixin.qq.com/s?__biz=Mzk0ODU4MzEzMw==&mid=2247512170&idx=1&sn=c4a04a383d2dfdece676b75f17224e78",target:"_blank"}},[t._v("å­—èŠ‚è·³åŠ¨ç¦»èŒè·³æ§½åˆ°æŸå¤–ä¼")]),t._v("æœŸé—´ï¼Œä¸º"),e("span",{staticStyle:{"font-weight":"bold"}},[t._v("æ–¹ä¾¿è‡ªå·±æ‰¾å·¥ä½œï¼Œå¢åŠ ä¸Šå²¸å‡ ç‡")]),t._v("ï¼Œæˆ‘è‡ªå·±ä»0å¼€å‘äº†ä¸€ä¸ª"),e("span",{staticStyle:{"font-weight":"bold",color:"red"}},[t._v("äº’è”ç½‘ä¸­å¤§å‚é¢è¯•çœŸé¢˜è§£æç½‘ç«™")]),t._v("ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªå‰ç«¯å’Œä¸€ä¸ªåç«¯ã€‚èƒ½å¤Ÿå®šå‘æŸ¥çœ‹æŸäº›å…¬å¸çš„æŸäº›å²—ä½é¢è¯•çœŸé¢˜ï¼Œæ¯”å¦‚æˆ‘æƒ³æŸ¥ä¸€ä¸‹è¡Œä¸šä¸ºäº’è”ç½‘ï¼Œå…¬å¸ä¸ºå­—èŠ‚è·³åŠ¨ï¼Œè€ƒå¯Ÿå²—ä½ä¸ºåç«¯ï¼Œè€ƒå¯Ÿæ—¶é—´ä¸ºæœ€è¿‘ä¸€å¹´ä¹‹ç±»çš„é¢è¯•é¢˜æœ‰å“ªäº›ï¼Ÿ\n")]),e("div",{attrs:{align:"center"}}),t._v("ç½‘ç«™åœ°å€ï¼š"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://top.interviewguide.cn/",target:"_blank"}},[t._v("InterviewGuideå¤§å‚é¢è¯•çœŸé¢˜è§£æç½‘ç«™")]),t._v("ã€‚ç‚¹æ­¤å¯ä»¥æŸ¥çœ‹è¯¥ç½‘ç«™çš„è§†é¢‘ä»‹ç»ï¼š"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://www.bilibili.com/video/BV1f94y1C7BL",target:"_blank"}},[t._v("Bç«™è§†é¢‘è®²è§£")]),t._v("   å¦‚æœå¯ä»¥çš„è¯æ±‚ä¸ªBç«™ä¸‰è¿ï¼Œæ„Ÿè°¢ï¼\n  "),e("p"),t._v("3ã€ğŸ˜Š\n    åˆ†äº«ä¸€ä¸ªå­¦å¼Ÿå‘ç»™æˆ‘çš„"),e("span",{staticStyle:{"font-weight":"bold",color:"red"}},[t._v("20Tç½‘ç›˜èµ„æºåˆé›†")]),t._v("ï¼Œ"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://docs.qq.com/sheet/DY3VPVklVaFFMcUZ4?tab=9h5afr",target:"_blank"}},[t._v("ç‚¹æ­¤ç™½å«–")]),t._v("ï¼Œä¸»è¦æ˜¯å„ç±»é«˜æ¸…å½±è§†ã€ç”µè§†å‰§ã€éŸ³ä¹ã€å‰¯ä¸šã€çºªå½•ç‰‡ã€è‹±è¯­å››å…­çº§è€ƒè¯•ã€è€ƒç ”è€ƒå…¬ç­‰èµ„æºã€‚\n  "),e("p"),t._v(" "),e("p",[t._v("4ã€ğŸ˜å…è´¹åˆ†äº«é˜¿ç§€ä¸ªäººå­¦ä¹ è®¡ç®—æœºä»¥æ¥æ”¶é›†åˆ°çš„å…è´¹å­¦ä¹ èµ„æºï¼Œ"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"/notes/07-resources/01-free/01-introduce.html",target:"_blank"}},[t._v("ç‚¹æ­¤ç™½å«–")]),t._v("ï¼›ä¹Ÿè®°å½•ä¸€ä¸‹è‡ªå·±ä»¥å‰ä¹°è¿‡çš„"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"/notes/07-resources/02-precious.html",target:"_blank"}},[t._v("ä¸é”™çš„è®¡ç®—æœºä¹¦ç±ã€ç½‘ç»œä¸“æ å’Œåƒåœ¾ä»˜è´¹ä¸“æ ")]),t._v("ï¼›ä¹Ÿè®°å½•ä¸€ä¸‹è‡ªå·±ä»¥å‰ä¹°è¿‡çš„"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"/notes/07-resources/02-precious.html",target:"_blank"}},[t._v("ä¸é”™çš„è®¡ç®—æœºä¹¦ç±ã€ç½‘ç»œä¸“æ å’Œåƒåœ¾ä»˜è´¹ä¸“æ ")])]),t._v(" "),e("p",[t._v("5ã€ğŸš€å¦‚æœä½ æƒ³åœ¨æ ¡æ‹›ä¸­é¡ºåˆ©æ‹¿åˆ°æ›´å¥½çš„offerï¼Œé˜¿ç§€å»ºè®®ä½ å¤šçœ‹çœ‹å‰äºº"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://www.yuque.com/tuobaaxiu/httmmc/npg1k81zeq4wfpyz",target:"_blank"}},[t._v("è¸©è¿‡çš„å‘")]),t._v("å’Œ"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{target:"_blank",href:"https://www.yuque.com/tuobaaxiu/httmmc/gge9ppd0mbu2d3dp"}},[t._v("ç•™ä¸‹çš„ç»éªŒ")]),t._v("ï¼Œäº‹å®ä¸Šä½ ç°åœ¨é‡åˆ°çš„å¤§å¤šæ•°é—®é¢˜ä½ çš„å­¦é•¿å­¦å§å¸ˆå…„å¸ˆå§åŸºæœ¬éƒ½å·²ç»é‡åˆ°è¿‡äº†ã€‚\n  ")]),t._v(" "),e("p",[t._v("6ã€ğŸ”¥ æ¬¢è¿å‡†å¤‡è®¡ç®—æœºæ ¡æ‹›çš„å°ä¼™ä¼´åŠ å…¥æˆ‘çš„"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://www.yuque.com/tuobaaxiu/httmmc/xg0otqvc17wfx4u9",target:"_blank"}},[t._v("å­¦ä¹ åœˆå­")]),t._v("ï¼Œä¸€ä¸ªäººè¸½è¸½ç‹¬è¡Œä¸å¦‚ä¸€ç¾¤äººæŠ¥å›¢å–æš–ï¼Œåœˆå­é‡Œæ²‰æ·€äº†å¾ˆå¤šè¿‡å»21/22/23å±Šå­¦é•¿å­¦å§çš„"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://www.yuque.com/tuobaaxiu/httmmc/gge9ppd0mbu2d3dp",target:"_blank"}},[t._v("ç»éªŒå’Œæ€»ç»“")]),t._v("ï¼Œå¥½å¥½è·Ÿç€èµ°ä¸‹å»çš„ï¼Œæœ€ååŸºæœ¬éƒ½å¯ä»¥æ‹¿åˆ°ä¸é”™çš„offerï¼æ­¤å¤–ï¼Œæ¯å‘¨éƒ½ä¼šè¿›è¡Œ"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://www.yuque.com/tuobaaxiu/httmmc/npg1k81zeq4wfpyz",target:"_blank"}},[t._v("ç²¾åæ€»ç»“å’Œåˆ†äº«ï¼")]),t._v("å¦‚æœä½ éœ€è¦ã€Šé˜¿ç§€çš„å­¦ä¹ ç¬”è®°ã€‹ç½‘ç«™ä¸­ğŸ“šï¸æ ¡æ‹›å…«è‚¡æ–‡ç›¸å…³çŸ¥è¯†ç‚¹çš„PDFç‰ˆæœ¬çš„è¯ï¼Œå¯ä»¥"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://www.yuque.com/tuobaaxiu/httmmc/qs0yn66apvkzw0ps",target:"_blank"}},[t._v("ç‚¹æ­¤ä¸‹è½½")]),t._v(" ã€‚")])]),t._v(" "),e("p",{attrs:{id:"å¬è¯´è¿‡å—å®ƒæ˜¯ä»€ä¹ˆ"}}),t._v(" "),e("h2",{attrs:{id:"_1ã€å¬è¯´è¿‡rediså—-å®ƒæ˜¯ä»€ä¹ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€å¬è¯´è¿‡rediså—-å®ƒæ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" 1ã€å¬è¯´è¿‡Rediså—ï¼Ÿå®ƒæ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),e("p",[t._v("Redisæ˜¯ä¸€ä¸ª"),e("strong",[t._v("æ•°æ®åº“")]),t._v("ï¼Œä¸è¿‡ä¸ä¼ ç»Ÿæ•°æ®åº“ä¸åŒçš„æ˜¯Redisçš„æ•°æ®åº“æ˜¯å­˜åœ¨"),e("strong",[t._v("å†…å­˜")]),t._v("ä¸­ï¼Œæ‰€ä»¥"),e("strong",[t._v("è¯»å†™é€Ÿåº¦éå¸¸å¿«")]),t._v("ï¼Œå› æ­¤ Redisè¢«å¹¿æ³›åº”ç”¨äº"),e("strong",[t._v("ç¼“å­˜")]),t._v("æ–¹å‘ã€‚")]),t._v(" "),e("p",[t._v("é™¤æ­¤ä¹‹å¤–ï¼ŒRedisä¹Ÿç»å¸¸ç”¨æ¥åšåˆ†å¸ƒå¼é”ï¼ŒRedisæä¾›äº†å¤šç§æ•°æ®ç±»å‹æ¥æ”¯æŒä¸åŒçš„ä¸šåŠ¡åœºæ™¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒRedis æ”¯æŒäº‹åŠ¡æŒä¹…åŒ–ã€LUAè„šæœ¬ã€LRUé©±åŠ¨äº‹ä»¶ã€å¤šç§é›†ç¾¤æ–¹æ¡ˆã€‚")]),t._v(" "),e("p",{attrs:{id:"äº”ç§æ•°æ®ç»“æ„æ•´ç†"}}),t._v(" "),e("h2",{attrs:{id:"_2ã€redisçš„äº”ç§æ•°æ®ç»“æ„æ•´ç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€redisçš„äº”ç§æ•°æ®ç»“æ„æ•´ç†"}},[t._v("#")]),t._v(" 2ã€Redisçš„äº”ç§æ•°æ®ç»“æ„æ•´ç†")]),t._v(" "),e("h3",{attrs:{id:"ç®€å•åŠ¨æ€å­—ç¬¦ä¸²-simple-dynamic-string-sds"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•åŠ¨æ€å­—ç¬¦ä¸²-simple-dynamic-string-sds"}},[t._v("#")]),t._v(" "),e("strong",[t._v("ç®€å•åŠ¨æ€å­—ç¬¦ä¸²(Simple Dynamic Stringï¼ŒSDS)")])]),t._v(" "),e("p",[t._v("Redisæ²¡æœ‰ç›´æ¥ä½¿ç”¨Cè¯­è¨€ä¼ ç»Ÿçš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯è‡ªå·±æ„å»ºäº†ä¸€ç§åä¸ºç®€å•åŠ¨æ€å­—ç¬¦ä¸²ï¼ˆSimple dynamic stringï¼ŒSDSï¼‰çš„æŠ½è±¡ç±»å‹ï¼Œå¹¶å°†SDSç”¨ä½œRedisçš„é»˜è®¤å­—ç¬¦ä¸²è¡¨ç¤ºã€‚")]),t._v(" "),e("p",[t._v("å…¶å®SDSç­‰åŒäºCè¯­è¨€ä¸­çš„char * ï¼Œä½†å®ƒå¯ä»¥å­˜å‚¨ä»»æ„äºŒè¿›åˆ¶æ•°æ®ï¼Œä¸èƒ½åƒCè¯­è¨€å­—ç¬¦ä¸²é‚£æ ·ä»¥å­—ç¬¦â€™\\0â€™æ¥æ ‡è¯†å­—ç¬¦ä¸²çš„ç»“ æŸï¼Œå› æ­¤å®ƒå¿…ç„¶æœ‰ä¸ªé•¿åº¦å­—æ®µã€‚")]),t._v(" "),e("p",[e("strong",[t._v("å®šä¹‰")])]),t._v(" "),e("div",{staticClass:"language-c extra-class"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("sdshdr")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å½•bufæ•°ç»„ä¸­å·²ä½¿ç”¨å­—èŠ‚çš„æ•°é‡")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç­‰äºsdsæ‰€ä¿å­˜å­—ç¬¦ä¸²çš„é•¿åº¦")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" len"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å½•bufæ•°ç»„ä¸­æœªä½¿ç”¨å­—èŠ‚çš„æ•°é‡")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" free"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å­—èŠ‚æ•°ç»„ï¼Œç”¨äºä¿å­˜å­—ç¬¦ä¸²")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" buf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[e("strong",[t._v("ä¼˜ç‚¹")])]),t._v(" "),e("ul",[e("li",[t._v("è·å–å­—ç¬¦ä¸²é•¿åº¦çš„å¤æ‚åº¦ä¸ºO(1)ã€‚")]),t._v(" "),e("li",[t._v("æœç»ç¼“å†²åŒºæº¢å‡ºã€‚")]),t._v(" "),e("li",[t._v("å‡å°‘ä¿®æ”¹å­—ç¬¦ä¸²é•¿åº¦æ—¶æ‰€éœ€è¦çš„å†…å­˜é‡åˆ†é…æ¬¡æ•°ã€‚")]),t._v(" "),e("li",[t._v("äºŒè¿›åˆ¶å®‰å…¨ã€‚")]),t._v(" "),e("li",[t._v("å…¼å®¹éƒ¨åˆ†Cå­—ç¬¦ä¸²å‡½æ•°ã€‚")])]),t._v(" "),e("p",[t._v("å®ƒå…·æœ‰å¾ˆå¸¸è§„çš„ set/get æ“ä½œï¼Œvalue å¯ä»¥æ˜¯Stringä¹Ÿå¯ä»¥æ˜¯æ•°å­—ï¼Œä¸€èˆ¬åšä¸€äº›å¤æ‚çš„è®¡æ•°åŠŸèƒ½çš„ç¼“å­˜ã€‚")]),t._v(" "),e("h3",{attrs:{id:"é“¾è¡¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é“¾è¡¨"}},[t._v("#")]),t._v(" "),e("strong",[t._v("é“¾è¡¨")])]),t._v(" "),e("p",[t._v("å½“æœ‰ä¸€ä¸ªåˆ—è¡¨é”®åŒ…å«äº†æ•°é‡æ¯”è¾ƒå¤šçš„å…ƒç´ ï¼Œåˆæˆ–è€…åˆ—è¡¨ä¸­åŒ…å«çš„å…ƒç´ éƒ½æ˜¯æ¯”è¾ƒé•¿çš„é¢å­—ç¬¦ä¸²æ—¶ï¼ŒRediså°±ä¼šä½¿ç”¨é“¾è¡¨ä½œä¸ºåˆ—è¡¨å»ºçš„åº•å±‚å®ç°ã€‚")]),t._v(" "),e("p",[e("strong",[t._v("èŠ‚ç‚¹åº•å±‚ç»“æ„")])]),t._v(" "),e("div",{staticClass:"language-c extra-class"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("listNode")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‰ç½®èŠ‚ç‚¹")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("listNode")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("prev"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åç½®èŠ‚ç‚¹")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("listNode")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("next"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŠ‚ç‚¹çš„å€¼")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" listNode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[e("strong",[t._v("liståº•å±‚ç»“æ„")])]),t._v(" "),e("div",{staticClass:"language-c extra-class"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("list")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¡¨å¤´èŠ‚ç‚¹")]),t._v("\n    listNode "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("head"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¡¨å°¾èŠ‚ç‚¹")]),t._v("\n    listNode "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("tail"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é“¾è¡¨æ‰€åŒ…å«çš„èŠ‚ç‚¹æ•°é‡")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" len"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŠ‚ç‚¹å€¼å¤åˆ¶å‡½æ•°")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("dup"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("ptr"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŠ‚ç‚¹å€¼æ˜¯æ”¾è¿‡å‡½æ•°")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("free"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("ptr"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŠ‚ç‚¹å€¼å¯¹æ¯”å‡½æ•°")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v("ï¼ˆ"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("matchï¼‰"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("ptr"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" list"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[e("strong",[t._v("ç‰¹æ€§")])]),t._v(" "),e("ul",[e("li",[t._v("é“¾è¡¨è¢«å¹¿æ³›ç”¨äºå®ç°Redisçš„å„ç§åŠŸèƒ½ï¼Œæ¯”å¦‚åˆ—è¡¨å»ºã€å‘å¸ƒä¸è®¢é˜…ã€æ…¢æŸ¥è¯¢ã€ç›‘è§†å™¨ç­‰ã€‚")]),t._v(" "),e("li",[t._v("æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹ç”±ä¸€ä¸ªlistNodeç»“æ„æ¥è¡¨ç¤ºï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘å‰ç½®èŠ‚ç‚¹å’Œåç½®èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œæ‰€ä»¥Redisçš„é“¾è¡¨å®ç°æ˜¯åŒç«¯é“¾è¡¨ã€‚")]),t._v(" "),e("li",[t._v("æ¯ä¸ªé“¾è¡¨ä½¿ç”¨ä¸€ä¸ªlistç»“æ„è¡¨ç¤ºï¼Œè¿™ä¸ªç»“æ„å¸¦æœ‰è¡¨å¤´èŠ‚ç‚¹æŒ‡é’ˆã€è¡¨å°¾èŠ‚ç‚¹æŒ‡é’ˆï¼Œä»¥åŠé“¾è¡¨é•¿åº¦ç­‰ä¿¡æ¯ã€‚")]),t._v(" "),e("li",[t._v("å› ä¸ºé“¾è¡¨è¡¨å¤´çš„å‰ç½®èŠ‚ç‚¹å’Œè¡¨å°¾èŠ‚ç‚¹çš„åç½®èŠ‚ç‚¹éƒ½æŒ‡å‘NULLï¼Œæ‰€ä»¥Redisçš„é“¾è¡¨å®ç°æ˜¯æ— ç¯é“¾è¡¨ã€‚")]),t._v(" "),e("li",[t._v("é€šè¿‡ä¸ºé“¾è¡¨è®¾ç½®ä¸åŒçš„ç±»å‹ç‰¹å®šå‡½æ•°ï¼ŒRedisçš„é“¾è¡¨å¯ä»¥ç”¨äºä¿å­˜å„ç§ä¸åŒç±»å‹çš„å€¼ã€‚")])]),t._v(" "),e("h3",{attrs:{id:"å­—å…¸"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å­—å…¸"}},[t._v("#")]),t._v(" "),e("strong",[t._v("å­—å…¸")])]),t._v(" "),e("p",[t._v("å­—å…¸çš„åº•å±‚æ˜¯å“ˆå¸Œè¡¨ï¼Œç±»ä¼¼ C++ä¸­çš„ map ï¼Œä¹Ÿå°±æ˜¯é”®å€¼å¯¹ã€‚")]),t._v(" "),e("h3",{attrs:{id:"å“ˆå¸Œè¡¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å“ˆå¸Œè¡¨"}},[t._v("#")]),t._v(" "),e("strong",[t._v("å“ˆå¸Œè¡¨")])]),t._v(" "),e("div",{staticClass:"language-c extra-class"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("dictht")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å“ˆå¸Œè¡¨æ•°ç»„")]),t._v("\n    dictEntry "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("table"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å“ˆå¸Œè¡¨å¤§å°")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" size"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å“ˆå¸Œè¡¨å¤§å°æ©ç ï¼Œç”¨äºè®¡ç®—ç´¢å¼•å€¼")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ€»æ˜¯ç­‰äºsize-1")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" sizemark"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯¥å“ˆå¸Œè¡¨å·²æœ‰èŠ‚ç‚¹çš„æ•°é‡")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" used"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" dichht"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[e("strong",[t._v("å“ˆå¸Œç®—æ³•")])]),t._v(" "),e("p",[t._v("å½“å­—å…¸è¢«ç”¨ä½œæ•°æ®åº“çš„åº•å±‚å®ç°ï¼Œæˆ–è€…å“ˆå¸Œé”®çš„åº•å±‚å®ç°æ—¶ï¼ŒRedisä½¿ç”¨MurmurHashç®—æ³•ã€‚è¿™ç§ç®—æ³•çš„ä¼˜ç‚¹åœ¨äºå³ä½¿è¾“å…¥çš„é”®æ˜¯è§„å¾‹çš„ï¼Œç®—æ³•ä»èƒ½ç»™å‡ºä¸€ä¸ªä¸ªå¾ˆå¥½çš„éšæœºåˆ†å¸ƒæ€§ï¼Œå¹¶ä¸”ç®—æ³•çš„è®¡ç®—é€Ÿåº¦éå¸¸å¿«ã€‚")]),t._v(" "),e("p",[e("strong",[t._v("å“ˆå¸Œå†²çªçš„è§£å†³æ–¹å¼")])]),t._v(" "),e("p",[t._v("Redisçš„å“ˆå¸Œè¡¨ä½¿ç”¨é“¾åœ°å€æ³•æ¥è§£å†³é”®å†²çªï¼Œæ¯ä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªnextæŒ‡é’ˆï¼Œå¤šä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹å¯ä»¥ç”¨è¿™ä¸ªå•å‘é“¾è¡¨è¿æ¥èµ·æ¥ï¼Œè¿™å°±è§£å†³äº†é”®å†²çªçš„é—®é¢˜ã€‚")]),t._v(" "),e("p",[e("strong",[t._v("ç‰¹æ€§")])]),t._v(" "),e("ol",[e("li",[t._v("å­—å…¸è¢«å¹¿æ³›ç”¨äºå®ç°Redisçš„å„ç§åŠŸèƒ½ï¼Œå…¶ä¸­åŒ…æ‹¬æ•°æ®åº“å’Œå“ˆå¸Œé”®ã€‚")]),t._v(" "),e("li",[t._v("Redisä¸­çš„å­—å…¸ä½¿ç”¨å“ˆå¸Œè¡¨ä½œä¸ºåº•å±‚ç»“æ„å®ç°ï¼Œæ¯ä¸ªå­—å…¸å¸¦æœ‰ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œä¸€ä¸ªå¹³æ—¶ä½¿ç”¨ï¼Œå¦ä¸€ä¸ªä»…åœ¨è¿›è¡Œrehashæ—¶ä½¿ç”¨ã€‚")]),t._v(" "),e("li",[t._v("Redisä½¿ç”¨MurmurHash2ç®—æ³•æ¥è®¡ç®—é”®çš„å“ˆå¸Œå€¼ã€‚")]),t._v(" "),e("li",[t._v("å“ˆå¸Œè¡¨ä½¿ç”¨é“¾åœ°å€æ³•æ¥è§£å†³é”®å†²çªã€‚")])]),t._v(" "),e("h3",{attrs:{id:"è·³è·ƒè¡¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è·³è·ƒè¡¨"}},[t._v("#")]),t._v(" "),e("strong",[t._v("è·³è·ƒè¡¨")])]),t._v(" "),e("p",[t._v("å…ˆçœ‹è¿™æ ·ä¸€å¼ å›¾ï¼š\n"),e("img",{attrs:{src:"http://oss.interviewguide.cn/img/202205220024713.png",alt:""}})]),t._v(" "),e("p",[t._v("å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬è¦æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ ï¼Œå°±éœ€è¦ä»å¤´èŠ‚ç‚¹å¼€å§‹éå†ï¼Œç›´åˆ°æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹æˆ–è€…æ˜¯ç¬¬ä¸€ä¸ªå¤§äºè¦æŸ¥æ‰¾çš„å…ƒç´ çš„èŠ‚ç‚¹ï¼ˆæ²¡æ‰¾åˆ°ï¼‰ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€‚")]),t._v(" "),e("p",[t._v("è¿™ä¸ªæŸ¥æ‰¾æ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„ï¼Œä½†å¦‚æœæˆ‘ä»¬æŠŠåˆ—è¡¨çš„æŸäº›èŠ‚ç‚¹æ‹”é«˜ä¸€å±‚ï¼Œå¦‚ä¸‹å›¾ï¼Œä¾‹å¦‚æŠŠæ¯ä¸¤ä¸ªèŠ‚ç‚¹ä¸­æœ‰ä¸€ä¸ªèŠ‚ç‚¹å˜æˆä¸¤å±‚ã€‚é‚£ä¹ˆç¬¬äºŒå±‚çš„èŠ‚ç‚¹åªæœ‰ç¬¬ä¸€å±‚çš„ä¸€åŠï¼ŒæŸ¥æ‰¾æ•ˆç‡ä¹Ÿå°±ä¼šæé«˜ã€‚")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://oss.interviewguide.cn/img/202205220024190.png",alt:""}})]),t._v(" "),e("p",[t._v("æŸ¥æ‰¾çš„æ­¥éª¤æ˜¯ä»å¤´èŠ‚ç‚¹çš„é¡¶å±‚å¼€å§‹ï¼ŒæŸ¥åˆ°ç¬¬ä¸€ä¸ªå¤§äºæŒ‡å®šå…ƒç´ çš„èŠ‚ç‚¹æ—¶ï¼Œé€€å›ä¸Šä¸€èŠ‚ç‚¹ï¼Œåœ¨ä¸‹ä¸€å±‚ç»§ç»­æŸ¥æ‰¾ã€‚")]),t._v(" "),e("p",[t._v("æ¯”å¦‚æˆ‘ä»¬è¦æŸ¥æ‰¾16ï¼š")]),t._v(" "),e("ol",[e("li",[t._v("ä»å¤´èŠ‚ç‚¹çš„æœ€é¡¶å±‚å¼€å§‹ï¼Œå…ˆåˆ°èŠ‚ç‚¹7ã€‚")]),t._v(" "),e("li",[t._v("7çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯39ï¼Œå¤§äº16ï¼Œå› æ­¤æˆ‘ä»¬é€€å›åˆ°7")]),t._v(" "),e("li",[t._v("ä»7å¼€å§‹ï¼Œåœ¨ä¸‹ä¸€å±‚ç»§ç»­æŸ¥æ‰¾ï¼Œå°±å¯ä»¥æ‰¾åˆ°16ã€‚")])]),t._v(" "),e("p",[t._v("è¿™ä¸ªä¾‹å­ä¸­éå†çš„èŠ‚ç‚¹ä¸æ¯”ä¸€ç»´åˆ—è¡¨å°‘ï¼Œä½†æ˜¯å½“èŠ‚ç‚¹æ›´å¤šï¼ŒæŸ¥æ‰¾çš„æ•°å­—æ›´å¤§æ—¶ï¼Œè¿™ç§åšæ³•çš„ä¼˜åŠ¿å°±ä½“ç°å‡ºæ¥äº†ã€‚è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è¦"),e("strong",[t._v("æŸ¥æ‰¾çš„æ˜¯39")]),t._v("ï¼Œé‚£ä¹ˆåªéœ€è¦è®¿é—®ä¸¤ä¸ªèŠ‚ç‚¹ï¼ˆ7ã€39ï¼‰å°±å¯ä»¥æ‰¾åˆ°äº†ã€‚è¿™æ¯”ä¸€ç»´åˆ—è¡¨è¦å‡å°‘ä¸€åŠçš„æ•°é‡ã€‚")]),t._v(" "),e("p",[t._v("ä¸ºäº†é¿å…æ’å…¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼Œskiplistæ¯å±‚çš„æ•°é‡ä¸ä¼šä¸¥æ ¼æŒ‰ç…§2:1çš„æ¯”ä¾‹ï¼Œè€Œæ˜¯å¯¹æ¯ä¸ªè¦æ’å…¥çš„å…ƒç´ éšæœºä¸€ä¸ªå±‚æ•°ã€‚")]),t._v(" "),e("p",[t._v("éšæœºå±‚æ•°çš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),e("ol",[e("li",[t._v("æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ç¬¬ä¸€å±‚")]),t._v(" "),e("li",[t._v("é‚£ä¹ˆå®ƒæœ‰ç¬¬äºŒå±‚çš„æ¦‚ç‡æ˜¯pï¼Œæœ‰ç¬¬ä¸‰å±‚çš„æ¦‚ç‡æ˜¯p*p")]),t._v(" "),e("li",[t._v("ä¸èƒ½è¶…è¿‡æœ€å¤§å±‚æ•°")])]),t._v(" "),e("p",[e("strong",[t._v("zskiplistNode")])]),t._v(" "),e("div",{staticClass:"language-c extra-class"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("zskiplistNode")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åé€€æŒ‡é’ˆ")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("zskiplistNode")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("backward"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ†å€¼ æƒé‡")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" score"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆå‘˜å¯¹è±¡")]),t._v("\n    robj "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("obj"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å±‚")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("zskiplistLevel")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‰è¿›æŒ‡é’ˆ")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("zskiplistNode")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("forward"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·¨åº¦")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" span"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" leval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" zskiplistNode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("ä¸€èˆ¬æ¥è¯´ï¼Œå±‚çš„æ•°é‡è¶Šå¤šï¼Œè®¿é—®å…¶ä»–èŠ‚ç‚¹çš„é€Ÿåº¦è¶Šå¿«ã€‚")]),t._v(" "),e("p",[e("strong",[t._v("zskipList")])]),t._v(" "),e("div",{staticClass:"language-c extra-class"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("zskiplist")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¡¨å¤´èŠ‚ç‚¹å’Œè¡¨å°¾èŠ‚ç‚¹")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("zskiplistNode")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("header"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("tail"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¡¨ä¸­èŠ‚ç‚¹çš„æ•°é‡")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¡¨ä¸­å±‚æ•°æœ€å¤§çš„èŠ‚ç‚¹çš„å±‚æ•°")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" leval"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" zskiplist"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("ç‰¹æ€§")]),t._v(" "),e("ul",[e("li",[t._v("è·³è·ƒè¡¨æ˜¯æœ‰åºé›†åˆçš„åº•å±‚å®ç°ä¹‹ä¸€")]),t._v(" "),e("li",[t._v("Redisçš„è·³è·ƒè¡¨å®ç°ç”±zskiplistå’ŒzskiplistNodeä¸¤ä¸ªç»“æ„ç»„æˆï¼Œå…¶ä¸­zskiplistç”¨äºä¿å­˜è·³è·ƒè¡¨ä¿¡æ¯ï¼ˆæ¯”å¦‚è¡¨å¤´èŠ‚ç‚¹ã€è¡¨å°¾èŠ‚ç‚¹ã€é•¿åº¦ï¼‰ï¼Œè€ŒzskiplistNodeåˆ™ç”¨äºè¡¨ç¤ºè·³è·ƒè¡¨èŠ‚ç‚¹")]),t._v(" "),e("li",[t._v("æ¯ä¸ªè·³è·ƒè¡¨èŠ‚ç‚¹çš„å±‚é«˜éƒ½æ˜¯1è‡³32ä¹‹é—´çš„éšæœºæ•°")]),t._v(" "),e("li",[t._v("åœ¨åŒä¸€ä¸ªè·³è·ƒè¡¨ä¸­ï¼Œå¤šä¸ªèŠ‚ç‚¹å¯ä»¥åŒ…å«ç›¸åŒçš„åˆ†å€¼ï¼Œä½†æ¯ä¸ªèŠ‚ç‚¹çš„æˆå‘˜å¯¹è±¡å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚")]),t._v(" "),e("li",[t._v("è·³è·ƒè¡¨ä¸­çš„èŠ‚ç‚¹æŒ‰ç…§åˆ†å€¼å¤§å°è¿›è¡Œæ’åºï¼Œå½“åˆ†å€¼ç›¸åŒæ—¶ï¼ŒèŠ‚ç‚¹æŒ‰ç…§æˆå‘˜å¯¹è±¡çš„å¤§å°è¿›è¡Œæ’åºã€‚")]),t._v(" "),e("li",[t._v("è·³è¡¨æ˜¯ä¸€ç§å®ç°èµ·æ¥å¾ˆç®€å•ï¼Œå•å±‚å¤šæŒ‡é’ˆçš„é“¾è¡¨ï¼Œå®ƒæŸ¥æ‰¾æ•ˆç‡å¾ˆé«˜ï¼Œå ªæ¯”ä¼˜åŒ–è¿‡çš„äºŒå‰å¹³è¡¡æ ‘ï¼Œä¸”æ¯”å¹³è¡¡æ ‘çš„å®ç°ã€‚")])]),t._v(" "),e("h3",{attrs:{id:"å‹ç¼©åˆ—è¡¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å‹ç¼©åˆ—è¡¨"}},[t._v("#")]),t._v(" "),e("strong",[t._v("å‹ç¼©åˆ—è¡¨")])]),t._v(" "),e("blockquote",[e("p",[t._v("å‹ç¼©åˆ—è¡¨(ziplist)æ˜¯åˆ—è¡¨é”®å’Œå“ˆå¸Œé”®çš„åº•å±‚å®ç°ä¹‹ä¸€ã€‚å½“ä¸€ä¸ªåˆ—è¡¨é”®åªåŒ…å«å°‘é‡åˆ—è¡¨é¡¹ï¼Œå¹¶ä¸”æ¯ä¸ªåˆ—è¡¨é¡¹è¦ä¹ˆå°±æ˜¯å°æ•´æ•°å€¼ï¼Œè¦ä¹ˆå°±æ˜¯é•¿åº¦æ¯”è¾ƒçŸ­çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆRediså°±ä¼šä½¿ç”¨å‹ç¼©åˆ—è¡¨æ¥åšåˆ—è¡¨é”®çš„åº•å±‚å®ç°ã€‚")])]),t._v(" "),e("p",[e("strong",[t._v("ç‰¹æ€§")])]),t._v(" "),e("p",[t._v("çœ‹ä»–çš„åå­—å°±èƒ½çœ‹å‡ºæ¥ï¼Œæ˜¯ä¸ºäº†èŠ‚çœå†…å­˜é€ çš„åˆ—è¡¨ç»“æ„ã€‚")]),t._v(" "),e("p",{attrs:{id:"å¸¸è§æ•°æ®ç»“æ„ä»¥åŠä½¿ç”¨åœºæ™¯åˆ†åˆ«æ˜¯ä»€ä¹ˆ"}}),t._v(" "),e("h2",{attrs:{id:"_3ã€rediså¸¸è§æ•°æ®ç»“æ„ä»¥åŠä½¿ç”¨åœºæ™¯åˆ†åˆ«æ˜¯ä»€ä¹ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€rediså¸¸è§æ•°æ®ç»“æ„ä»¥åŠä½¿ç”¨åœºæ™¯åˆ†åˆ«æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" 3ã€Rediså¸¸è§æ•°æ®ç»“æ„ä»¥åŠä½¿ç”¨åœºæ™¯åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),e("h3",{attrs:{id:"string"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#string"}},[t._v("#")]),t._v(" "),e("strong",[t._v("String")])]),t._v(" "),e("p",[t._v("Stringæ•°æ®ç»“æ„æ˜¯ç®€å•çš„key-valueç±»å‹ï¼Œvalueå…¶å®ä¸ä»…å¯ä»¥æ˜¯Stringï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°å­—ã€‚ å¸¸è§„key-valueç¼“å­˜åº”ç”¨ï¼› å¸¸è§„è®¡æ•°ï¼šå¾®åšæ•°ï¼Œç²‰ä¸æ•°ç­‰ã€‚")]),t._v(" "),e("h3",{attrs:{id:"hash"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hash"}},[t._v("#")]),t._v(" "),e("strong",[t._v("Hash")])]),t._v(" "),e("p",[t._v("Hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ ï¬eld å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ï¼Œåç»­æ“ä½œçš„æ—¶å€™ï¼Œä½ å¯ä»¥ç›´æ¥ä»… ä»…ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå­—æ®µçš„å€¼ã€‚ æ¯”å¦‚æˆ‘ä»¬å¯ä»¥Hashæ•°æ®ç»“æ„æ¥å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œå•†å“ä¿¡æ¯ç­‰ã€‚")]),t._v(" "),e("h3",{attrs:{id:"list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[t._v("#")]),t._v(" "),e("strong",[t._v("List")])]),t._v(" "),e("p",[t._v("list å°±æ˜¯é“¾è¡¨ï¼ŒRedis list çš„åº”ç”¨åœºæ™¯éå¸¸å¤šï¼Œä¹Ÿæ˜¯Redisæœ€é‡è¦çš„æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œæ¯”å¦‚å¾®åšçš„å…³æ³¨åˆ—è¡¨ï¼Œç²‰ä¸åˆ—è¡¨ï¼Œ æ¶ˆæ¯åˆ—è¡¨ç­‰åŠŸèƒ½éƒ½å¯ä»¥ç”¨Redisçš„ list ç»“æ„æ¥å®ç°ã€‚")]),t._v(" "),e("p",[t._v("Redis list çš„å®ç°ä¸ºä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå³å¯ä»¥æ”¯æŒåå‘æŸ¥æ‰¾å’Œéå†ï¼Œæ›´æ–¹ä¾¿æ“ä½œï¼Œä¸è¿‡å¸¦æ¥äº†éƒ¨åˆ†é¢å¤–çš„å†…å­˜å¼€é”€ã€‚")]),t._v(" "),e("p",[t._v("å¦å¤–å¯ä»¥é€šè¿‡ lrange å‘½ä»¤ï¼Œå°±æ˜¯ä»æŸä¸ªå…ƒç´ å¼€å§‹è¯»å–å¤šå°‘ä¸ªå…ƒç´ ï¼Œå¯ä»¥åŸºäº list å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Œè¿™ä¸ªå¾ˆæ£’çš„ä¸€ä¸ªåŠŸ èƒ½ï¼ŒåŸºäº Redis å®ç°ç®€å•çš„é«˜æ€§èƒ½åˆ†é¡µï¼Œå¯ä»¥åšç±»ä¼¼å¾®åšé‚£ç§ä¸‹æ‹‰ä¸æ–­åˆ†é¡µçš„ä¸œè¥¿ï¼ˆä¸€é¡µä¸€é¡µçš„å¾€ä¸‹èµ°ï¼‰ï¼Œæ€§èƒ½é«˜ã€‚")]),t._v(" "),e("h3",{attrs:{id:"set"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[t._v("#")]),t._v(" "),e("strong",[t._v("Set")])]),t._v(" "),e("p",[t._v("set å¯¹å¤–æä¾›çš„åŠŸèƒ½ä¸listç±»ä¼¼æ˜¯ä¸€ä¸ªåˆ—è¡¨çš„åŠŸèƒ½ï¼Œç‰¹æ®Šä¹‹å¤„åœ¨äº set æ˜¯å¯ä»¥è‡ªåŠ¨æ’é‡çš„ã€‚")]),t._v(" "),e("p",[t._v("å½“ä½ éœ€è¦å­˜å‚¨ä¸€ä¸ªåˆ—è¡¨æ•°æ®ï¼Œåˆä¸å¸Œæœ›å‡ºç°é‡å¤æ•°æ®æ—¶ï¼Œsetæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå¹¶ä¸”setæä¾›äº†åˆ¤æ–­æŸä¸ªæˆå‘˜æ˜¯å¦åœ¨ ä¸€ä¸ªseté›†åˆå†…çš„é‡è¦æ¥å£ï¼Œè¿™ä¸ªä¹Ÿæ˜¯listæ‰€ä¸èƒ½æä¾›çš„ã€‚å¯ä»¥åŸºäº set è½»æ˜“å®ç°äº¤é›†ã€å¹¶é›†ã€å·®é›†çš„æ“ä½œã€‚")]),t._v(" "),e("p",[t._v("æ¯”å¦‚ï¼šåœ¨å¾®åšåº”ç”¨ä¸­ï¼Œå¯ä»¥å°†ä¸€ä¸ªç”¨æˆ·æ‰€æœ‰çš„å…³æ³¨äººå­˜åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œå°†å…¶æ‰€æœ‰ç²‰ä¸å­˜åœ¨ä¸€ä¸ªé›†åˆã€‚Rediså¯ä»¥éå¸¸ æ–¹ä¾¿çš„å®ç°å¦‚å…±åŒå…³æ³¨ã€å…±åŒç²‰ä¸ã€å…±åŒå–œå¥½ç­‰åŠŸèƒ½ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹Ÿå°±æ˜¯æ±‚äº¤é›†çš„è¿‡ç¨‹ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š"),e("code",[t._v("sinterstore key1 key2 key3")]),t._v("å°†äº¤é›†å­˜åœ¨key1å†…ã€‚")]),t._v(" "),e("h3",{attrs:{id:"sorted-set"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sorted-set"}},[t._v("#")]),t._v(" "),e("strong",[t._v("Sorted Set")])]),t._v(" "),e("p",[t._v("å’Œsetç›¸æ¯”ï¼Œsorted setå¢åŠ äº†ä¸€ä¸ªæƒé‡å‚æ•°scoreï¼Œä½¿å¾—é›†åˆä¸­çš„å…ƒç´ èƒ½å¤ŸæŒ‰scoreè¿›è¡Œæœ‰åºæ’åˆ—ã€‚")]),t._v(" "),e("p",[t._v("ä¸¾ä¾‹ï¼š åœ¨ç›´æ’­ç³»ç»Ÿä¸­ï¼Œå®æ—¶æ’è¡Œä¿¡æ¯åŒ…å«ç›´æ’­é—´åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ï¼Œå„ç§ç¤¼ç‰©æ’è¡Œæ¦œï¼Œå¼¹å¹•æ¶ˆæ¯ï¼ˆå¯ä»¥ç†è§£ä¸ºæŒ‰æ¶ˆæ¯ç»´ åº¦çš„æ¶ˆæ¯æ’è¡Œæ¦œï¼‰ç­‰ä¿¡æ¯ï¼Œé€‚åˆä½¿ç”¨ Redis ä¸­çš„ SortedSet ç»“æ„è¿›è¡Œå­˜å‚¨ã€‚")]),t._v(" "),e("p",{attrs:{id:"æœ‰ä¸å°±å¤Ÿç”¨äº†å—ä¸ºä»€ä¹ˆè¦ç”¨è¿™ç§æ–°çš„æ•°æ®åº“"}}),t._v(" "),e("h2",{attrs:{id:"_4ã€æœ‰mysqlä¸å°±å¤Ÿç”¨äº†å—-ä¸ºä»€ä¹ˆè¦ç”¨redisè¿™ç§æ–°çš„æ•°æ®åº“"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4ã€æœ‰mysqlä¸å°±å¤Ÿç”¨äº†å—-ä¸ºä»€ä¹ˆè¦ç”¨redisè¿™ç§æ–°çš„æ•°æ®åº“"}},[t._v("#")]),t._v(" 4ã€æœ‰MySQLä¸å°±å¤Ÿç”¨äº†å—ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨Redisè¿™ç§æ–°çš„æ•°æ®åº“ï¼Ÿ")]),t._v(" "),e("p",[t._v("ä¸»è¦æ˜¯å› ä¸º Redis å…·å¤‡é«˜æ€§èƒ½å’Œé«˜å¹¶å‘ä¸¤ç§ç‰¹æ€§ã€‚")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("é«˜æ€§èƒ½")]),t._v("ï¼šå‡å¦‚ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®æ•°æ®åº“ä¸­çš„æŸäº›æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šæ¯”è¾ƒæ…¢ï¼Œå› ä¸ºæ˜¯ä»ç¡¬ç›˜ä¸Šè¯»å–çš„ã€‚å°†è¯¥ç”¨æˆ·è®¿é—®çš„æ•°æ®å­˜åœ¨ç¼“å­˜ä¸­ï¼Œè¿™æ ·ä¸‹ä¸€æ¬¡å†è®¿é—®è¿™äº›æ•°æ®çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è·å–äº†ã€‚æ“ä½œç¼“å­˜å°±æ˜¯ç›´æ¥æ“ä½œå†…å­˜ï¼Œæ‰€ä»¥é€Ÿåº¦ç›¸å½“å¿«ã€‚å¦‚æœæ•°æ®åº“ä¸­çš„å¯¹åº”æ•°æ®æ”¹å˜çš„ä¹‹åï¼ŒåŒæ­¥æ”¹å˜ç¼“å­˜ä¸­ç›¸åº”çš„æ•°æ®å³å¯ï¼")]),t._v(" "),e("li",[e("strong",[t._v("é«˜å¹¶å‘")]),t._v("ï¼šç›´æ¥æ“ä½œç¼“å­˜èƒ½å¤Ÿæ‰¿å—çš„è¯·æ±‚æ˜¯è¿œè¿œå¤§äºç›´æ¥è®¿é—®æ•°æ®åº“çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘æŠŠæ•°æ®åº“ä¸­çš„éƒ¨åˆ†æ•°æ®è½¬ç§»åˆ°ç¼“å­˜ä¸­å»ï¼Œè¿™æ ·ç”¨æˆ·çš„ä¸€éƒ¨åˆ†è¯·æ±‚ä¼šç›´æ¥åˆ°ç¼“å­˜è¿™é‡Œè€Œä¸ç”¨ç»è¿‡æ•°æ®åº“ã€‚")])]),t._v(" "),e("p",{attrs:{id:"ä¹Ÿæ˜¯ä¸€ç§ç¼“å­˜å‹æ•°æ®ç»“æ„ä¸ºä»€ä¹ˆä¸ç”¨è€Œé€‰æ‹©åšç¼“å­˜"}}),t._v(" "),e("h2",{attrs:{id:"_5ã€c-ä¸­çš„mapä¹Ÿæ˜¯ä¸€ç§ç¼“å­˜å‹æ•°æ®ç»“æ„-ä¸ºä»€ä¹ˆä¸ç”¨map-è€Œé€‰æ‹©redisåšç¼“å­˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5ã€c-ä¸­çš„mapä¹Ÿæ˜¯ä¸€ç§ç¼“å­˜å‹æ•°æ®ç»“æ„-ä¸ºä»€ä¹ˆä¸ç”¨map-è€Œé€‰æ‹©redisåšç¼“å­˜"}},[t._v("#")]),t._v(" 5ã€C++ä¸­çš„Mapä¹Ÿæ˜¯ä¸€ç§ç¼“å­˜å‹æ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆä¸ç”¨Mapï¼Œè€Œé€‰æ‹©Redisåšç¼“å­˜ï¼Ÿ")]),t._v(" "),e("p",[t._v("ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ç¼“å­˜åˆ†ä¸º"),e("strong",[t._v("æœ¬åœ°ç¼“å­˜")]),t._v("å’Œ"),e("strong",[t._v("åˆ†å¸ƒå¼ç¼“å­˜")]),t._v("ã€‚")]),t._v(" "),e("p",[t._v("é‚£ä»¥ C++ è¯­è¨€ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ STL ä¸‹è‡ªå¸¦çš„å®¹å™¨ map æ¥å®ç°ç¼“å­˜ï¼Œä½†åªèƒ½å®ç°æœ¬åœ°ç¼“å­˜ï¼Œå®ƒæœ€ä¸»è¦çš„ç‰¹ç‚¹æ˜¯è½»é‡ä»¥åŠå¿«é€Ÿï¼Œä½†æ˜¯å…¶ç”Ÿå‘½å‘¨æœŸéšç€ç¨‹åºçš„é”€æ¯è€Œç»“æŸï¼Œå¹¶ä¸”åœ¨å¤šå®ä¾‹çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå®ä¾‹éƒ½éœ€è¦å„è‡ªä¿å­˜ä¸€ä»½ç¼“å­˜ï¼Œç¼“å­˜ä¸å…·æœ‰ä¸€è‡´æ€§ã€‚")]),t._v(" "),e("p",[t._v("ä½¿ç”¨ Redis æˆ– Memcached ä¹‹ç±»çš„ç§°ä¸ºåˆ†å¸ƒå¼ç¼“å­˜ï¼Œåœ¨å¤šå®ä¾‹çš„æƒ…å†µä¸‹ï¼Œå„å®ä¾‹å…±äº«ä¸€ä»½ç¼“å­˜æ•°æ®ï¼Œç¼“å­˜å…·æœ‰ä¸€è‡´æ€§ã€‚è¿™æ˜¯Redisæˆ–è€…Memcachedçš„ä¼˜ç‚¹æ‰€åœ¨ï¼Œä½†å®ƒä¹Ÿæœ‰ç¼ºç‚¹ï¼Œé‚£å°±æ˜¯éœ€è¦ä¿æŒ Redis æˆ– MemcachedæœåŠ¡çš„é«˜å¯ç”¨ï¼Œæ•´ä¸ªç¨‹åºæ¶æ„ä¸Šè¾ƒä¸ºå¤æ‚ã€‚")]),t._v(" "),e("p",{attrs:{id:"ä½¿ç”¨çš„å¥½å¤„æœ‰å“ªäº›"}}),t._v(" "),e("h2",{attrs:{id:"_6ã€ä½¿ç”¨redisçš„å¥½å¤„æœ‰å“ªäº›"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6ã€ä½¿ç”¨redisçš„å¥½å¤„æœ‰å“ªäº›"}},[t._v("#")]),t._v(" 6ã€ä½¿ç”¨Redisçš„å¥½å¤„æœ‰å“ªäº›ï¼Ÿ")]),t._v(" "),e("p",[t._v("1ã€è®¿é—®é€Ÿåº¦å¿«ï¼Œå› ä¸ºæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œç±»ä¼¼äºJavaä¸­çš„HashMapæˆ–è€…C++ä¸­çš„å“ˆå¸Œè¡¨ï¼ˆå¦‚unordered_map/unordered_setï¼‰ï¼Œè¿™ä¸¤è€…çš„ä¼˜åŠ¿å°±æ˜¯æŸ¥æ‰¾å’Œæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)")]),t._v(" "),e("p",[t._v("2ã€æ•°æ®ç±»å‹ä¸°å¯Œï¼Œæ”¯æŒStringï¼Œlistï¼Œsetï¼Œsorted setï¼Œhashè¿™äº”ç§æ•°æ®ç»“æ„")]),t._v(" "),e("p",[t._v("3ã€æ”¯æŒäº‹åŠ¡ï¼ŒRedisä¸­çš„æ“ä½œéƒ½æ˜¯åŸå­æ€§ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å¯¹æ•°æ®çš„æ›´æ”¹è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼Œè¿™å°±æ˜¯åŸå­æ€§çš„å®šä¹‰")]),t._v(" "),e("p",[t._v("4ã€ç‰¹æ€§ä¸°å¯Œï¼šRediså¯ç”¨äºç¼“å­˜ï¼Œæ¶ˆæ¯ï¼ŒæŒ‰keyè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸåå°†ä¼šè‡ªåŠ¨åˆ é™¤ã€‚")]),t._v(" "),e("p",{attrs:{id:"ä¸çš„åŒºåˆ«éƒ½æœ‰å“ªäº›"}}),t._v(" "),e("h2",{attrs:{id:"_7ã€memcachedä¸redisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7ã€memcachedä¸redisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›"}},[t._v("#")]),t._v(" 7ã€Memcachedä¸Redisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›ï¼Ÿ")]),t._v(" "),e("p",[t._v("1ã€å­˜å‚¨æ–¹å¼")]),t._v(" "),e("ul",[e("li",[t._v("MemecacheæŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¹‹ä¸­ï¼Œæ–­ç”µåä¼šæŒ‚æ‰ï¼Œæ²¡æœ‰æŒä¹…åŒ–åŠŸèƒ½ï¼Œæ•°æ®ä¸èƒ½è¶…è¿‡å†…å­˜å¤§å°ã€‚")]),t._v(" "),e("li",[t._v("Redisæœ‰éƒ¨ä»½å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œè¿™æ ·èƒ½ä¿è¯æ•°æ®çš„æŒä¹…æ€§ã€‚")])]),t._v(" "),e("p",[t._v("2ã€æ•°æ®æ”¯æŒç±»å‹")]),t._v(" "),e("ul",[e("li",[t._v("Memcacheå¯¹æ•°æ®ç±»å‹æ”¯æŒç›¸å¯¹ç®€å•,åªæœ‰Stringè¿™ä¸€ç§ç±»å‹")]),t._v(" "),e("li",[t._v("Redisæœ‰å¤æ‚çš„æ•°æ®ç±»å‹ã€‚Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„k/vç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾› listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚")])]),t._v(" "),e("p",[t._v("3ã€ä½¿ç”¨åº•å±‚æ¨¡å‹ä¸åŒ")]),t._v(" "),e("ul",[e("li",[t._v("å®ƒä»¬ä¹‹é—´åº•å±‚å®ç°æ–¹å¼ ä»¥åŠä¸å®¢æˆ·ç«¯ä¹‹é—´é€šä¿¡çš„åº”ç”¨åè®®ä¸ä¸€æ ·ã€‚")]),t._v(" "),e("li",[t._v("Redisç›´æ¥è‡ªå·±æ„å»ºäº†VM æœºåˆ¶ ï¼Œå› ä¸ºä¸€èˆ¬çš„ç³»ç»Ÿè°ƒç”¨ç³»ç»Ÿå‡½æ•°çš„è¯ï¼Œä¼šæµªè´¹ä¸€å®šçš„æ—¶é—´å»ç§»åŠ¨å’Œè¯·æ±‚ã€‚")])]),t._v(" "),e("p",[t._v("4ã€é›†ç¾¤æ¨¡å¼ï¼šMemcachedæ²¡æœ‰åŸç”Ÿçš„é›†ç¾¤æ¨¡å¼ï¼Œéœ€è¦ä¾é å®¢æˆ·ç«¯æ¥å®ç°å¾€é›†ç¾¤ä¸­åˆ†ç‰‡å†™å…¥æ•°æ®ï¼›ä½†æ˜¯ Redis ç›®å‰ æ˜¯åŸç”Ÿæ”¯æŒ cluster æ¨¡å¼çš„.")]),t._v(" "),e("p",[t._v("5ã€Memcachedæ˜¯å¤šçº¿ç¨‹ï¼Œéé˜»å¡IOå¤ç”¨çš„ç½‘ç»œæ¨¡å‹ï¼›Redisä½¿ç”¨å•çº¿ç¨‹çš„å¤šè·¯ IO å¤ç”¨æ¨¡å‹ã€‚")]),t._v(" "),e("p",[t._v("6ã€Value å€¼å¤§å°ä¸åŒï¼šRedis æœ€å¤§å¯ä»¥è¾¾åˆ° 512MBï¼›Memcached åªæœ‰ 1MBã€‚")]),t._v(" "),e("p",{attrs:{id:"æ¯”çš„ä¼˜åŠ¿åœ¨å“ªé‡Œ"}}),t._v(" "),e("h2",{attrs:{id:"_8ã€redisæ¯”memcachedçš„ä¼˜åŠ¿åœ¨å“ªé‡Œ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8ã€redisæ¯”memcachedçš„ä¼˜åŠ¿åœ¨å“ªé‡Œ"}},[t._v("#")]),t._v(" 8ã€Redisæ¯”Memcachedçš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ")]),t._v(" "),e("p",[t._v("1ã€Memcachedæ‰€æœ‰çš„å€¼å‡æ˜¯ç®€å•å­—ç¬¦ä¸²ï¼ŒRedisä½œä¸ºå…¶æ›¿ä»£è€…ï¼Œæ”¯æŒæ›´ä¸ºä¸°å¯Œçš„æ•°æ®ç±»å‹")]),t._v(" "),e("p",[t._v("2ã€Redis çš„é€Ÿåº¦æ¯” Memcached å¿«å¾ˆå¤š")]),t._v(" "),e("p",[t._v("3ã€Rediså¯ä»¥åšåˆ°æŒä¹…åŒ–æ•°æ®")]),t._v(" "),e("p",{attrs:{id:"ç¼“å­˜ä¸­å¸¸è¯´çš„çƒ­ç‚¹æ•°æ®å’Œå†·æ•°æ®æ˜¯ä»€ä¹ˆ"}}),t._v(" "),e("h2",{attrs:{id:"_9ã€ç¼“å­˜ä¸­å¸¸è¯´çš„çƒ­ç‚¹æ•°æ®å’Œå†·æ•°æ®æ˜¯ä»€ä¹ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9ã€ç¼“å­˜ä¸­å¸¸è¯´çš„çƒ­ç‚¹æ•°æ®å’Œå†·æ•°æ®æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" 9ã€ç¼“å­˜ä¸­å¸¸è¯´çš„çƒ­ç‚¹æ•°æ®å’Œå†·æ•°æ®æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),e("p",[t._v("å…¶å®å°±æ˜¯åå­—ä¸Šçš„æ„æ€ï¼Œçƒ­æ•°æ®å°±æ˜¯è®¿é—®æ¬¡æ•°è¾ƒå¤šçš„æ•°æ®ï¼Œå†·æ•°æ®å°±æ˜¯è®¿é—®å¾ˆå°‘æˆ–è€…ä»ä¸è®¿é—®çš„æ•°æ®ã€‚")]),t._v(" "),e("p",[t._v("éœ€è¦æ³¨æ„çš„æ˜¯åªæœ‰çƒ­ç‚¹æ•°æ®ï¼Œç¼“å­˜æ‰æœ‰ä»·å€¼\nå¯¹äºå†·æ•°æ®è€Œè¨€ï¼Œå¤§éƒ¨åˆ†æ•°æ®å¯èƒ½è¿˜æ²¡æœ‰å†æ¬¡è®¿é—®åˆ°å°±å·²ç»è¢«æŒ¤å‡ºå†…å­˜ï¼Œä¸ä»…å ç”¨å†…å­˜ï¼Œè€Œä¸”ä»·å€¼ä¸å¤§ã€‚")]),t._v(" "),e("p",[e("strong",[t._v("æ•°æ®æ›´æ–°å‰è‡³å°‘è¯»å–ä¸¤æ¬¡")]),t._v("ï¼Œç¼“å­˜æ‰æœ‰æ„ä¹‰ã€‚è¿™ä¸ªæ˜¯æœ€åŸºæœ¬çš„ç­–ç•¥ï¼Œå¦‚æœç¼“å­˜è¿˜æ²¡æœ‰èµ·ä½œç”¨å°±å¤±æ•ˆäº†ï¼Œé‚£å°±æ²¡æœ‰å¤ªå¤§ä»·å€¼äº†ã€‚")]),t._v(" "),e("p",{attrs:{id:"ä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„è€Œä¸é‡‡ç”¨å¤šçº¿ç¨‹æ–¹æ¡ˆ"}}),t._v("\n## 10ã€Redis ä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„è€Œä¸é‡‡ç”¨å¤šçº¿ç¨‹æ–¹æ¡ˆï¼Ÿ\n"),e("p",[t._v("è¿™ä¸»è¦æ˜¯åŸºäºä¸€ç§å®¢è§‚åŸå› æ¥è€ƒè™‘çš„ã€‚å› ä¸ºRedisæ˜¯åŸºäºå†…å­˜çš„æ“ä½œï¼ŒCPUä¸æ˜¯Redisçš„ç“¶é¢ˆï¼ŒRedisçš„ç“¶é¢ˆæœ€æœ‰å¯èƒ½æ˜¯æœºå™¨å†…å­˜çš„å¤§å°æˆ–è€…ç½‘ç»œå¸¦å®½ã€‚æ—¢ç„¶å•çº¿ç¨‹å®¹æ˜“å®ç°ï¼Œè€Œä¸”CPUä¸ä¼šæˆä¸ºç“¶é¢ˆï¼Œé‚£å°±é¡ºç†æˆç« åœ°é‡‡ç”¨å•çº¿ç¨‹çš„æ–¹æ¡ˆäº†ï¼ˆæ¯•ç«Ÿé‡‡ç”¨å¤šçº¿ç¨‹ä¼šæœ‰å¾ˆå¤šéº»çƒ¦ï¼ï¼‰")]),t._v(" "),e("p",{attrs:{id:"å•çº¿ç¨‹çš„ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«"}}),t._v(" "),e("h2",{attrs:{id:"_11ã€å•çº¿ç¨‹çš„redisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11ã€å•çº¿ç¨‹çš„redisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«"}},[t._v("#")]),t._v(" 11ã€å•çº¿ç¨‹çš„Redisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ")]),t._v(" "),e("p",[t._v("ä¸»è¦æ˜¯æœ‰ä¸‰ä¸ªåŸå› ï¼š1ã€Redisçš„å…¨éƒ¨æ“ä½œéƒ½æ˜¯çº¯å†…å­˜çš„æ“ä½œï¼›2ã€Redisé‡‡ç”¨å•çº¿ç¨‹ï¼Œæœ‰æ•ˆé¿å…äº†é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼›3ï¼Œé‡‡ç”¨äº†éé˜»å¡I/Oå¤šè·¯å¤ç”¨æœºåˆ¶ã€‚")]),t._v(" "),e("p",{attrs:{id:"äº†è§£çš„çº¿ç¨‹æ¨¡å‹å—å¯ä»¥å¤§è‡´è¯´è¯´å—"}}),t._v("\n## 12ã€äº†è§£Redisçš„çº¿ç¨‹æ¨¡å‹å—ï¼Ÿå¯ä»¥å¤§è‡´è¯´è¯´å—ï¼Ÿ\n"),e("p",[t._v("å¦‚æœä½ æ‰“å¼€çœ‹è¿‡ Redis çš„æºç å°±ä¼šå‘ç°Redis å†…éƒ¨ä½¿ç”¨æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ file event handlerï¼Œè¿™ä¸ªæ–‡ä»¶äº‹ä»¶å¤„ç†å™¨æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥ Redis æ‰å«åšå•çº¿ç¨‹çš„æ¨¡å‹ã€‚å®ƒé‡‡ç”¨ IO å¤šè·¯å¤ç”¨æœºåˆ¶åŒæ—¶ç›‘å¬å¤šä¸ª socketï¼Œæ ¹æ® socket ä¸Šçš„äº‹ä»¶æ¥é€‰æ‹©å¯¹åº”çš„äº‹ä»¶å¤„ç†å™¨è¿›è¡Œå¤„ç†ã€‚")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://oss.interviewguide.cn/img/202205220024968.png",alt:""}})]),t._v(" "),e("p",[t._v("æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨çš„ç»“æ„åŒ…å« 4 ä¸ªéƒ¨åˆ†ï¼š")]),t._v(" "),e("ul",[e("li",[t._v("å¤šä¸ª socket")]),t._v(" "),e("li",[t._v("IOå¤šè·¯å¤ç”¨ç¨‹åº")]),t._v(" "),e("li",[t._v("æ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨")]),t._v(" "),e("li",[t._v("äº‹ä»¶å¤„ç†å™¨ï¼ˆè¿æ¥åº”ç­”å¤„ç†å™¨ã€å‘½ä»¤è¯·æ±‚å¤„ç†å™¨ã€å‘½ä»¤å›å¤å¤„ç†å™¨ï¼‰")])]),t._v(" "),e("p",[t._v("ä½¿ç”¨ I/O å¤šè·¯å¤ç”¨ç¨‹åºæ¥åŒæ—¶ç›‘å¬å¤šä¸ªå¥—æ¥å­—ï¼Œ å¹¶æ ¹æ®å¥—æ¥å­—ç›®å‰æ‰§è¡Œçš„ä»»åŠ¡æ¥ä¸ºå¥—æ¥å­—å…³è”ä¸åŒçš„äº‹ä»¶å¤„ç†å™¨ã€‚å½“è¢«ç›‘å¬çš„å¥—æ¥å­—å‡†å¤‡å¥½æ‰§è¡Œè¿æ¥åº”ç­”ï¼ˆacceptï¼‰ã€è¯»å–ï¼ˆreadï¼‰ã€å†™å…¥ï¼ˆwriteï¼‰ã€å…³é—­ï¼ˆcloseï¼‰ç­‰æ“ä½œæ—¶ï¼Œ ä¸æ“ä½œç›¸å¯¹åº”çš„æ–‡ä»¶äº‹ä»¶å°±ä¼šäº§ç”Ÿï¼Œ è¿™æ—¶æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨å°±ä¼šè°ƒç”¨å¥—æ¥å­—ä¹‹å‰å…³è”å¥½çš„äº‹ä»¶å¤„ç†å™¨æ¥å¤„ç†è¿™äº›äº‹ä»¶ã€‚")]),t._v(" "),e("p",[t._v("å¤šä¸ª socket å¯èƒ½ä¼šå¹¶å‘äº§ç”Ÿä¸åŒçš„æ“ä½œï¼Œæ¯ä¸ªæ“ä½œå¯¹åº”ä¸åŒçš„æ–‡ä»¶äº‹ä»¶ï¼Œä½†æ˜¯ IO å¤šè·¯å¤ç”¨ç¨‹åºä¼šç›‘å¬å¤šä¸ª socketï¼Œä¼šå°† socket äº§ç”Ÿçš„äº‹ä»¶æ”¾å…¥é˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œäº‹ä»¶åˆ†æ´¾å™¨æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªäº‹ä»¶ï¼ŒæŠŠè¯¥äº‹ä»¶äº¤ç»™å¯¹åº”çš„äº‹ä»¶å¤„ç†å™¨è¿›è¡Œå¤„ç†ã€‚")]),t._v(" "),e("p",[t._v("ä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼šâ€œI/O å¤šè·¯å¤ç”¨ç¨‹åºè´Ÿè´£ç›‘å¬å¤šä¸ªå¥—æ¥å­—ï¼Œ å¹¶å‘æ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨ä¼ é€é‚£äº›äº§ç”Ÿäº†äº‹ä»¶çš„å¥—æ¥å­—ã€‚â€")]),t._v(" "),e("p",{attrs:{id:"è®¾ç½®è¿‡æœŸæ—¶é—´çš„ä¸¤ç§æ–¹æ¡ˆæ˜¯ä»€ä¹ˆ"}}),t._v(" "),e("h2",{attrs:{id:"_13ã€redisè®¾ç½®è¿‡æœŸæ—¶é—´çš„ä¸¤ç§æ–¹æ¡ˆæ˜¯ä»€ä¹ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13ã€redisè®¾ç½®è¿‡æœŸæ—¶é—´çš„ä¸¤ç§æ–¹æ¡ˆæ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" 13ã€Redisè®¾ç½®è¿‡æœŸæ—¶é—´çš„ä¸¤ç§æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),e("p",[t._v("Redisä¸­æœ‰ä¸ªè®¾ç½®æ—¶é—´è¿‡æœŸçš„åŠŸèƒ½ï¼Œå³å¯¹å­˜å‚¨åœ¨ Redis æ•°æ®åº“ä¸­çš„å€¼å¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ã€‚")]),t._v(" "),e("p",[t._v("ä½œä¸ºä¸€ä¸ªç¼“å­˜æ•°æ®åº“ï¼Œ è¿™æ˜¯éå¸¸å®ç”¨çš„ï¼Œæ¯”å¦‚ä¸€äº› token æˆ–è€…ç™»å½•ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯çŸ­ä¿¡éªŒè¯ç éƒ½æ˜¯æœ‰æ—¶é—´é™åˆ¶çš„ï¼ŒæŒ‰ç…§ä¼ ç»Ÿçš„æ•°æ®åº“å¤„ç†æ–¹å¼ï¼Œä¸€èˆ¬éƒ½æ˜¯è‡ªå·±åˆ¤æ–­è¿‡æœŸï¼Œè¿™æ ·æ— ç–‘ä¼šä¸¥é‡å½±å“é¡¹ç›®æ€§èƒ½ã€‚")]),t._v(" "),e("p",[t._v("æˆ‘ä»¬ set key çš„æ—¶å€™ï¼Œéƒ½å¯ä»¥ç»™ä¸€ä¸ª expire timeï¼Œå°±æ˜¯è¿‡æœŸæ—¶é—´ï¼Œé€šè¿‡è¿‡æœŸæ—¶é—´æˆ‘ä»¬å¯ä»¥æŒ‡å®šè¿™ä¸ª key å¯ä»¥å­˜æ´»çš„æ—¶é—´ï¼Œä¸»è¦å¯é‡‡ç”¨"),e("strong",[t._v("å®šæœŸåˆ é™¤å’Œæƒ°æ€§åˆ é™¤")]),t._v("ä¸¤ç§æ–¹æ¡ˆã€‚")]),t._v(" "),e("ul",[e("li",[t._v("å®šæœŸåˆ é™¤ï¼šRedisé»˜è®¤æ˜¯æ¯éš” 100ms å°±éšæœºæŠ½å–ä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyï¼Œæ£€æŸ¥å…¶æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸå°±åˆ  é™¤ã€‚æ³¨æ„è¿™é‡Œæ˜¯éšæœºæŠ½å–çš„ã€‚ä¸ºä»€ä¹ˆè¦éšæœºå‘¢ï¼Ÿä½ æƒ³ä¸€æƒ³å‡å¦‚ Redis å­˜äº†å‡ åä¸‡ä¸ª key ï¼Œæ¯éš”100mså°±éå†æ‰€ æœ‰çš„è®¾ç½®è¿‡æœŸæ—¶é—´çš„ key çš„è¯ï¼Œå°±ä¼šç»™ CPU å¸¦æ¥å¾ˆå¤§çš„è´Ÿè½½ï¼")]),t._v(" "),e("li",[t._v("æƒ°æ€§åˆ é™¤ ï¼šå®šæœŸåˆ é™¤å¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šè¿‡æœŸ key åˆ°äº†æ—¶é—´å¹¶æ²¡æœ‰è¢«åˆ é™¤æ‰ã€‚æ‰€ä»¥å°±æœ‰äº†æƒ°æ€§åˆ é™¤ã€‚å®ƒæ˜¯æŒ‡æŸä¸ªé”®å€¼è¿‡æœŸå,æ­¤é”®å€¼ä¸ä¼šé©¬ä¸Šè¢«åˆ é™¤,è€Œæ˜¯ç­‰åˆ°ä¸‹æ¬¡è¢«ä½¿ç”¨çš„æ—¶å€™,æ‰ä¼šè¢«æ£€æŸ¥åˆ°è¿‡æœŸ,æ­¤æ—¶æ‰èƒ½å¾—åˆ°åˆ é™¤,æƒ°æ€§åˆ é™¤çš„ç¼ºç‚¹å¾ˆæ˜æ˜¾æ˜¯æµªè´¹å†…å­˜ã€‚ é™¤éä½ çš„ç³»ç»Ÿå»æŸ¥ä¸€ä¸‹é‚£ä¸ª keyï¼Œæ‰ä¼šè¢«Redisç»™åˆ é™¤æ‰ã€‚è¿™å°±æ˜¯æ‰€è°“çš„æƒ°æ€§åˆ é™¤ï¼")])]),t._v(" "),e("p",{attrs:{id:"å®šæœŸå’Œæƒ°æ€§ä¸€å®šèƒ½ä¿è¯åˆ é™¤æ•°æ®å—å¦‚æœä¸èƒ½ä¼šæœ‰ä»€ä¹ˆåº”å¯¹æªæ–½"}}),t._v(" "),e("h2",{attrs:{id:"_14ã€å®šæœŸå’Œæƒ°æ€§ä¸€å®šèƒ½ä¿è¯åˆ é™¤æ•°æ®å—-å¦‚æœä¸èƒ½-redisä¼šæœ‰ä»€ä¹ˆåº”å¯¹æªæ–½"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_14ã€å®šæœŸå’Œæƒ°æ€§ä¸€å®šèƒ½ä¿è¯åˆ é™¤æ•°æ®å—-å¦‚æœä¸èƒ½-redisä¼šæœ‰ä»€ä¹ˆåº”å¯¹æªæ–½"}},[t._v("#")]),t._v(" 14ã€å®šæœŸå’Œæƒ°æ€§ä¸€å®šèƒ½ä¿è¯åˆ é™¤æ•°æ®å—ï¼Ÿå¦‚æœä¸èƒ½ï¼ŒRedisä¼šæœ‰ä»€ä¹ˆåº”å¯¹æªæ–½ï¼Ÿ")]),t._v(" "),e("p",[t._v("å¹¶ä¸èƒ½ä¿è¯ä¸€å®šåˆ é™¤ï¼ŒRedsiæœ‰ä¸€ä¸ªRedis å†…å­˜æ·˜æ±°æœºåˆ¶æ¥ç¡®ä¿æ•°æ®ä¸€å®šä¼šè¢«åˆ é™¤ã€‚")]),t._v(" "),e("p",[t._v("é¦–å…ˆä»‹ä¸€ä¸‹å®šæœŸåˆ é™¤å’Œæƒ°æ€§åˆ é™¤çš„å·¥ä½œæµç¨‹ï¼š")]),t._v(" "),e("p",[t._v("1ã€å®šæœŸåˆ é™¤ï¼ŒRedisé»˜è®¤æ¯ä¸ª100msæ£€æŸ¥ï¼Œæ˜¯å¦æœ‰è¿‡æœŸçš„key,æœ‰è¿‡æœŸkeyåˆ™åˆ é™¤ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒRedisä¸æ˜¯æ¯ä¸ª100mså°†æ‰€æœ‰çš„keyæ£€æŸ¥ä¸€æ¬¡ï¼Œè€Œæ˜¯éšæœºæŠ½å–è¿›è¡Œæ£€æŸ¥(å¦‚æœæ¯éš”100ms,å…¨éƒ¨keyè¿›è¡Œæ£€æŸ¥ï¼ŒRediså²‚ä¸æ˜¯å¡æ­»)ã€‚å› æ­¤ï¼Œå¦‚æœåªé‡‡ç”¨å®šæœŸåˆ é™¤ç­–ç•¥ï¼Œä¼šå¯¼è‡´å¾ˆå¤škeyåˆ°æ—¶é—´æ²¡æœ‰åˆ é™¤ã€‚")]),t._v(" "),e("p",[t._v("2ã€äºæ˜¯ï¼Œæƒ°æ€§åˆ é™¤æ´¾ä¸Šç”¨åœºã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä½ è·å–æŸä¸ªkeyçš„æ—¶å€™ï¼ŒRedisä¼šæ£€æŸ¥ä¸€ä¸‹ï¼Œè¿™ä¸ªkeyå¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´é‚£ä¹ˆæ˜¯å¦è¿‡æœŸäº†ï¼Ÿå¦‚æœè¿‡æœŸäº†æ­¤æ—¶å°±ä¼šåˆ é™¤ã€‚")]),t._v(" "),e("p",[t._v("3ã€é‡‡ç”¨å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤å°±æ²¡å…¶ä»–é—®é¢˜äº†ä¹ˆ?\nä¸æ˜¯çš„ï¼Œå¦‚æœå®šæœŸåˆ é™¤æ²¡åˆ é™¤keyã€‚ç„¶åä½ ä¹Ÿæ²¡å³æ—¶å»è¯·æ±‚keyï¼Œä¹Ÿå°±æ˜¯è¯´æƒ°æ€§åˆ é™¤ä¹Ÿæ²¡ç”Ÿæ•ˆã€‚è¿™æ ·ï¼ŒRedis")]),t._v(" "),e("p",[t._v("4ã€å†…å­˜ä¼šè¶Šæ¥è¶Šé«˜ã€‚é‚£ä¹ˆå°±åº”è¯¥é‡‡ç”¨å†…å­˜æ·˜æ±°æœºåˆ¶ã€‚")]),t._v(" "),e("p",[t._v("åœ¨Redis.confä¸­æœ‰ä¸€è¡Œé…ç½®:maxmemory-policy volatile-lru")]),t._v(" "),e("p",[t._v("è¯¥é…ç½®å°±æ˜¯é…å†…å­˜æ·˜æ±°ç­–ç•¥çš„ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å…­ç§æ–¹æ¡ˆï¼š\n"),e("strong",[t._v("volatile-lru")]),t._v("ï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°\n"),e("strong",[t._v("volatile-ttl")]),t._v("ï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°\n"),e("strong",[t._v("volatile-random")]),t._v("ï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°\n"),e("strong",[t._v("allkeys-lru")]),t._v("ï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°\n"),e("strong",[t._v("allkeys-random")]),t._v("ï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°\n"),e("strong",[t._v("no-enviction")]),t._v("ï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™\npsï¼šå¦‚æœæ²¡æœ‰è®¾ç½® expire çš„key, ä¸æ»¡è¶³å…ˆå†³æ¡ä»¶(prerequisites); é‚£ä¹ˆ volatile-lru, volatile-random å’Œ volatile-ttl ç­–ç•¥çš„è¡Œä¸º, å’Œ noeviction(ä¸åˆ é™¤) åŸºæœ¬ä¸Šä¸€è‡´ã€‚")]),t._v(" "),e("p",{attrs:{id:"å¯¹äºå¤§é‡çš„è¯·æ±‚æ˜¯æ€æ ·å¤„ç†çš„"}}),t._v(" "),e("h2",{attrs:{id:"_15ã€rediså¯¹äºå¤§é‡çš„è¯·æ±‚-æ˜¯æ€æ ·å¤„ç†çš„"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15ã€rediså¯¹äºå¤§é‡çš„è¯·æ±‚-æ˜¯æ€æ ·å¤„ç†çš„"}},[t._v("#")]),t._v(" 15ã€Rediså¯¹äºå¤§é‡çš„è¯·æ±‚ï¼Œæ˜¯æ€æ ·å¤„ç†çš„ï¼Ÿ")]),t._v(" "),e("p",[t._v("1ã€Redisæ˜¯ä¸€ä¸ªå•çº¿ç¨‹ç¨‹åºï¼Œä¹Ÿå°±è¯´åŒä¸€æ—¶åˆ»å®ƒåªèƒ½å¤„ç†ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ï¼›\n2ã€Redisæ˜¯é€šè¿‡IOå¤šè·¯å¤ç”¨ï¼ˆselectï¼Œepollï¼Œkqueueï¼Œä¾æ®ä¸åŒçš„å¹³å°ï¼Œé‡‡å–ä¸åŒçš„å®ç°ï¼‰æ¥å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚ã€‚")]),t._v(" "),e("p",{attrs:{id:"ç¼“å­˜é›ªå´©ç¼“å­˜ç©¿é€ç¼“å­˜é¢„çƒ­ç¼“å­˜æ›´æ–°ç¼“å­˜å‡»ç©¿ç¼“å­˜é™çº§å…¨æå®š"}}),t._v(" "),e("h2",{attrs:{id:"_16ã€ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é¢„çƒ­ã€ç¼“å­˜æ›´æ–°ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é™çº§å…¨æå®š"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_16ã€ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é¢„çƒ­ã€ç¼“å­˜æ›´æ–°ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é™çº§å…¨æå®š"}},[t._v("#")]),t._v(" 16ã€ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é¢„çƒ­ã€ç¼“å­˜æ›´æ–°ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é™çº§å…¨æå®šï¼")]),t._v(" "),e("h3",{attrs:{id:"ç¼“å­˜é›ªå´©"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜é›ªå´©"}},[t._v("#")]),t._v(" "),e("strong",[t._v("ç¼“å­˜é›ªå´©")])]),t._v(" "),e("p",[t._v("ç¼“å­˜é›ªå´©æŒ‡çš„æ˜¯ç¼“å­˜åŒä¸€æ—¶é—´å¤§é¢ç§¯çš„å¤±æ•ˆï¼Œæ‰€ä»¥ï¼Œåé¢çš„è¯·æ±‚éƒ½ä¼šè½åˆ°æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“çŸ­æ—¶é—´å†…æ‰¿å—å¤§é‡è¯·æ±‚è€Œå´©æ‰ã€‚")]),t._v(" "),e("p",[t._v("çœ‹ä¸æ‡‚ï¼Ÿé‚£æˆ‘è¯´äººè¯ã€‚")]),t._v(" "),e("p",[t._v("æˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼šç”±äºåŸæœ‰ç¼“å­˜å¤±æ•ˆï¼Œæ–°ç¼“å­˜æœªåˆ°æœŸé—´(ä¾‹å¦‚ï¼šæˆ‘ä»¬è®¾ç½®ç¼“å­˜æ—¶é‡‡ç”¨äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œåœ¨åŒä¸€æ—¶åˆ»å‡ºç°å¤§é¢ç§¯çš„ç¼“å­˜è¿‡æœŸ)ï¼Œæ‰€æœ‰åŸæœ¬åº”è¯¥è®¿é—®ç¼“å­˜çš„è¯·æ±‚éƒ½å»æŸ¥è¯¢æ•°æ®åº“äº†ï¼Œè€Œå¯¹æ•°æ®åº“CPUå’Œå†…å­˜é€ æˆå·¨å¤§å‹åŠ›ï¼Œä¸¥é‡çš„ä¼šé€ æˆæ•°æ®åº“å®•æœºï¼Œä»è€Œå½¢æˆä¸€ç³»åˆ—è¿é”ååº”ï¼Œé€ æˆæ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚")]),t._v(" "),e("p",[e("strong",[t._v("è§£å†³åŠæ³•")])]),t._v(" "),e("ul",[e("li",[t._v("äº‹å‰ï¼šå°½é‡ä¿è¯æ•´ä¸ª Redis é›†ç¾¤çš„é«˜å¯ç”¨æ€§ï¼Œå‘ç°æœºå™¨å®•æœºå°½å¿«è¡¥ä¸Šï¼Œé€‰æ‹©åˆé€‚çš„å†…å­˜æ·˜æ±°ç­–ç•¥ã€‚")]),t._v(" "),e("li",[t._v("äº‹ä¸­ï¼šæœ¬åœ°ehcacheç¼“å­˜ + hystrixé™æµ&é™çº§ï¼Œé¿å…MySQLå´©æ‰ï¼Œ é€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚")]),t._v(" "),e("li",[t._v("äº‹åï¼šåˆ©ç”¨ Redis æŒä¹…åŒ–æœºåˆ¶ä¿å­˜çš„æ•°æ®å°½å¿«æ¢å¤ç¼“å­˜")])]),t._v(" "),e("h3",{attrs:{id:"ç¼“å­˜ç©¿é€"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜ç©¿é€"}},[t._v("#")]),t._v(" "),e("strong",[t._v("ç¼“å­˜ç©¿é€")])]),t._v(" "),e("p",[t._v("ä¸€èˆ¬æ˜¯é»‘å®¢æ•…æ„å»è¯·æ±‚ç¼“å­˜ä¸­ä¸å­˜åœ¨çš„æ•°æ®ï¼Œå¯¼è‡´æ‰€æœ‰çš„è¯·æ±‚éƒ½è½åˆ°æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“çŸ­æ—¶é—´å†…æ‰¿å—å¤§é‡ è¯·æ±‚è€Œå´©æ‰ã€‚")]),t._v(" "),e("p",[t._v("è¿™ä¹Ÿçœ‹ä¸æ‡‚ï¼Ÿé‚£æˆ‘å†æ¢ä¸ªè¯´æ³•å¥½äº†ã€‚")]),t._v(" "),e("p",[t._v("ç¼“å­˜ç©¿é€æ˜¯æŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ï¼Œç”±äºç¼“å­˜ä¸å‘½ä¸­ï¼Œæ¥ç€æŸ¥è¯¢æ•°æ®åº“ä¹Ÿæ— æ³•æŸ¥è¯¢å‡ºç»“æœï¼Œå› æ­¤ä¹Ÿä¸ä¼šå†™å…¥åˆ°ç¼“å­˜ä¸­ï¼Œè¿™å°†ä¼šå¯¼è‡´æ¯ä¸ªæŸ¥è¯¢éƒ½ä¼šå»è¯·æ±‚æ•°æ®åº“ï¼Œé€ æˆç¼“å­˜ç©¿é€ã€‚")]),t._v(" "),e("p",[e("strong",[t._v("è§£å†³åŠæ³•")])]),t._v(" "),e("p",[t._v("1ã€"),e("strong",[t._v("å¸ƒéš†è¿‡æ»¤å™¨")])]),t._v(" "),e("p",[t._v("è¿™æ˜¯æœ€å¸¸è§çš„ä¸€ç§è§£å†³æ–¹æ³•äº†ï¼Œå®ƒæ˜¯å°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„"),e("strong",[t._v("bitmap")]),t._v("ä¸­ï¼Œä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ä¼šè¢« è¿™ä¸ªbitmapæ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹ åŠ›ã€‚")]),t._v(" "),e("p",[t._v("å¯¹æ‰€æœ‰å¯èƒ½æŸ¥è¯¢çš„å‚æ•°ä»¥hashå½¢å¼å­˜å‚¨ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ ¡éªŒï¼Œä¸ç¬¦åˆåˆ™ä¸¢å¼ƒï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ï¼›")]),t._v(" "),e("p",[t._v("è¿™é‡Œç¨å¾®ç§‘æ™®ä¸€ä¸‹å¸ƒéš†è¿‡æ»¤å™¨ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("å¸ƒéš†è¿‡æ»¤å™¨æ˜¯å¼•å…¥äº†k(k>1)k(k>1)ä¸ªç›¸äº’ç‹¬ç«‹çš„å“ˆå¸Œå‡½æ•°ï¼Œä¿è¯åœ¨ç»™å®šçš„ç©ºé—´ã€è¯¯åˆ¤ç‡ä¸‹ï¼Œå®Œæˆå…ƒç´ åˆ¤é‡çš„è¿‡ç¨‹ã€‚\nå®ƒçš„ä¼˜ç‚¹æ˜¯ç©ºé—´æ•ˆç‡å’ŒæŸ¥è¯¢æ—¶é—´éƒ½è¿œè¿œè¶…è¿‡ä¸€èˆ¬çš„ç®—æ³•ï¼Œç¼ºç‚¹æ˜¯æœ‰ä¸€å®šçš„è¯¯è¯†åˆ«ç‡å’Œåˆ é™¤å›°éš¾ã€‚")]),t._v(" "),e("p",[t._v("è¯¥ç®—æ³•çš„"),e("strong",[t._v("æ ¸å¿ƒæ€æƒ³")]),t._v("å°±æ˜¯åˆ©ç”¨å¤šä¸ªä¸åŒçš„Hashå‡½æ•°æ¥è§£å†³â€œå†²çªâ€ã€‚Hashå­˜åœ¨ä¸€ä¸ªå†²çªï¼ˆç¢°æ’ï¼‰çš„é—®é¢˜ï¼Œç”¨åŒä¸€ä¸ªHashå¾—åˆ°çš„ä¸¤ä¸ªURLçš„å€¼æœ‰å¯èƒ½ç›¸åŒã€‚ä¸ºäº†å‡å°‘å†²çªï¼Œæˆ‘ä»¬å¯ä»¥å¤šå¼•å…¥å‡ ä¸ªHashï¼Œå¦‚æœé€šè¿‡å…¶ä¸­çš„ä¸€ä¸ªHashå€¼æˆ‘ä»¬å¾—å‡ºæŸå…ƒç´ ä¸åœ¨é›†åˆä¸­ï¼Œé‚£ä¹ˆè¯¥å…ƒç´ è‚¯å®šä¸åœ¨é›†åˆä¸­ã€‚åªæœ‰åœ¨æ‰€æœ‰çš„Hashå‡½æ•°å‘Šè¯‰æˆ‘ä»¬è¯¥å…ƒç´ åœ¨é›†åˆä¸­æ—¶ï¼Œæ‰èƒ½ç¡®å®šè¯¥å…ƒç´ å­˜åœ¨äºé›†åˆä¸­ã€‚è¿™ä¾¿æ˜¯å¸ƒéš†è¿‡æ»¤å™¨çš„åŸºæœ¬æ€æƒ³ï¼Œä¸€èˆ¬ç”¨äºåœ¨å¤§æ•°æ®é‡çš„é›†åˆä¸­åˆ¤å®šæŸå…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚")])]),t._v(" "),e("p",[t._v("2ã€"),e("strong",[t._v("ç¼“å­˜ç©ºå¯¹è±¡")])]),t._v(" "),e("p",[t._v("å½“å­˜å‚¨å±‚ä¸å‘½ä¸­åï¼Œå³ä½¿è¿”å›çš„ç©ºå¯¹è±¡ä¹Ÿå°†å…¶ç¼“å­˜èµ·æ¥ï¼ŒåŒæ—¶ä¼šè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä¹‹åå†è®¿é—®è¿™ä¸ªæ•°æ®å°†ä¼šä»ç¼“å­˜ä¸­è·å–ï¼Œä¿æŠ¤äº†åç«¯æ•°æ®æºï¼›å¦‚æœä¸€ä¸ª"),e("strong",[t._v("æŸ¥è¯¢è¿”å›çš„æ•°æ®ä¸ºç©º")]),t._v("ï¼ˆä¸ç®¡æ˜¯æ•°æ®ä¸å­˜ åœ¨ï¼Œè¿˜æ˜¯ç³»ç»Ÿæ•…éšœï¼‰ï¼Œæˆ‘ä»¬ä»ç„¶æŠŠè¿™ä¸ªç©ºç»“æœè¿›è¡Œç¼“å­˜ï¼Œä½†å®ƒçš„"),e("strong",[t._v("è¿‡æœŸæ—¶é—´ä¼šå¾ˆçŸ­")]),t._v("ï¼Œæœ€é•¿ä¸è¶…è¿‡äº”åˆ†é’Ÿã€‚")]),t._v(" "),e("p",[t._v("ä½†æ˜¯è¿™ç§æ–¹æ³•ä¼šå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š")]),t._v(" "),e("p",[t._v("1ã€å¦‚æœç©ºå€¼èƒ½å¤Ÿè¢«ç¼“å­˜èµ·æ¥ï¼Œè¿™å°±æ„å‘³ç€ç¼“å­˜éœ€è¦æ›´å¤šçš„ç©ºé—´å­˜å‚¨æ›´å¤šçš„é”®ï¼Œå› ä¸ºè¿™å½“ä¸­å¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„ç©ºå€¼çš„é”®ï¼›")]),t._v(" "),e("p",[t._v("2ã€å³ä½¿å¯¹ç©ºå€¼è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œè¿˜æ˜¯ä¼šå­˜åœ¨ç¼“å­˜å±‚å’Œå­˜å‚¨å±‚çš„æ•°æ®ä¼šæœ‰ä¸€æ®µæ—¶é—´çª—å£çš„ä¸ä¸€è‡´ï¼Œè¿™å¯¹äºéœ€è¦ä¿æŒä¸€è‡´æ€§çš„ä¸šåŠ¡ä¼šæœ‰å½±å“ã€‚")]),t._v(" "),e("p",[t._v("æˆ‘ä»¬å¯ä»¥ä»é€‚ç”¨åœºæ™¯å’Œç»´æŠ¤æˆæœ¬ä¸¤æ–¹é¢å¯¹è¿™ä¸¤æ±‡æ€»æ–¹æ³•è¿›è¡Œä¸€ä¸ª"),e("strong",[t._v("ç®€å•æ¯”è¾ƒ")]),t._v("ï¼š")]),t._v(" "),e("p",[e("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šç¼“å­˜ç©ºå¯¹è±¡é€‚ç”¨äº1ã€æ•°æ®å‘½ä¸­ä¸é«˜ 2ã€æ•°æ®é¢‘ç¹å˜åŒ–ä¸”å®æ—¶æ€§è¾ƒé«˜ ï¼›è€Œå¸ƒéš†è¿‡æ»¤å™¨é€‚ç”¨1ã€æ•°æ®å‘½ä¸­ä¸é«˜ 2ã€æ•°æ®ç›¸å¯¹å›ºå®šå³å®æ—¶æ€§è¾ƒä½")]),t._v(" "),e("p",[e("strong",[t._v("ç»´æŠ¤æˆæœ¬")]),t._v("ï¼šç¼“å­˜ç©ºå¯¹è±¡çš„æ–¹æ³•é€‚åˆ1ã€ä»£ç ç»´æŠ¤ç®€å• 2ã€éœ€è¦è¾ƒå¤šçš„ç¼“å­˜ç©ºé—´ 3ã€æ•°æ®ä¼šå‡ºç°ä¸ä¸€è‡´çš„ç°è±¡ï¼›å¸ƒéš†è¿‡æ»¤å™¨é€‚åˆ 1ã€ä»£ç ç»´æŠ¤è¾ƒå¤æ‚ 2ã€ç¼“å­˜ç©ºé—´è¦å°‘ä¸€äº›")]),t._v(" "),e("p",[e("strong",[t._v("ç¼“å­˜é¢„çƒ­")])]),t._v(" "),e("p",[t._v("ç¼“å­˜é¢„çƒ­æ˜¯æŒ‡ç³»ç»Ÿä¸Šçº¿åï¼Œå°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿã€‚è¿™æ ·å°±å¯ä»¥é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå†å°†æ•°æ®ç¼“å­˜çš„é—®é¢˜ã€‚ç”¨æˆ·ä¼šç›´æ¥æŸ¥è¯¢äº‹å…ˆè¢«é¢„çƒ­çš„ç¼“å­˜æ•°æ®ï¼")]),t._v(" "),e("p",[e("strong",[t._v("è§£å†³æ€è·¯")]),t._v("\n1ã€ç›´æ¥å†™ä¸ªç¼“å­˜åˆ·æ–°é¡µé¢ï¼Œä¸Šçº¿æ—¶æ‰‹å·¥æ“ä½œä¸‹ï¼›\n2ã€æ•°æ®é‡ä¸å¤§ï¼Œå¯ä»¥åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨è¿›è¡ŒåŠ è½½ï¼›\n3ã€å®šæ—¶åˆ·æ–°ç¼“å­˜ï¼›")]),t._v(" "),e("h3",{attrs:{id:"ç¼“å­˜æ›´æ–°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜æ›´æ–°"}},[t._v("#")]),t._v(" "),e("strong",[t._v("ç¼“å­˜æ›´æ–°")])]),t._v(" "),e("p",[t._v("é™¤äº†ç¼“å­˜æœåŠ¡å™¨è‡ªå¸¦çš„ç¼“å­˜å¤±æ•ˆç­–ç•¥ä¹‹å¤–ï¼ˆRedisé»˜è®¤çš„æœ‰6ä¸­ç­–ç•¥å¯ä¾›é€‰æ‹©ï¼‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰çš„ç¼“å­˜æ·˜æ±°ï¼Œå¸¸è§çš„ç­–ç•¥æœ‰ä¸¤ç§ï¼š"),e("strong",[t._v("å®šæ—¶åˆ é™¤å’Œæƒ°æ€§åˆ é™¤")]),t._v("ï¼Œå…¶ä¸­ï¼š\nï¼ˆ1ï¼‰å®šæ—¶åˆ é™¤ï¼šå®šæ—¶å»æ¸…ç†è¿‡æœŸçš„ç¼“å­˜ï¼›\nï¼ˆ2ï¼‰æƒ°æ€§åˆ é™¤ï¼šå½“æœ‰ç”¨æˆ·è¯·æ±‚è¿‡æ¥æ—¶ï¼Œå†åˆ¤æ–­è¿™ä¸ªè¯·æ±‚æ‰€ç”¨åˆ°çš„ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸçš„è¯å°±å»åº•å±‚ç³»ç»Ÿå¾—åˆ°æ–°æ•°æ®å¹¶æ›´æ–°ç¼“å­˜ã€‚\nä¸¤è€…å„æœ‰ä¼˜åŠ£ï¼Œç¬¬ä¸€ç§çš„ç¼ºç‚¹æ˜¯ç»´æŠ¤å¤§é‡ç¼“å­˜çš„keyæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œç¬¬äºŒç§çš„ç¼ºç‚¹å°±æ˜¯æ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¿‡æ¥éƒ½è¦åˆ¤æ–­ç¼“å­˜å¤±æ•ˆï¼Œé€»è¾‘ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼å…·ä½“ç”¨å“ªç§æ–¹æ¡ˆï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„åº”ç”¨åœºæ™¯æ¥æƒè¡¡ã€‚")]),t._v(" "),e("h3",{attrs:{id:"ç¼“å­˜å‡»ç©¿"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜å‡»ç©¿"}},[t._v("#")]),t._v(" "),e("strong",[t._v("ç¼“å­˜å‡»ç©¿")])]),t._v(" "),e("p",[t._v("ç¼“å­˜å‡»ç©¿ï¼Œæ˜¯æŒ‡ä¸€ä¸ªkeyéå¸¸çƒ­ç‚¹ï¼Œåœ¨ä¸åœçš„æ‰›ç€å¤§å¹¶å‘ï¼Œå¤§å¹¶å‘é›†ä¸­å¯¹è¿™ä¸€ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼Œå½“è¿™ä¸ªkeyåœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒæŒç»­çš„å¤§å¹¶å‘å°±ç©¿ç ´ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒåœ¨ä¸€ä¸ªå±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ã€‚")]),t._v(" "),e("p",[t._v("æ¯”å¦‚å¸¸è§çš„ç”µå•†é¡¹ç›®ä¸­ï¼ŒæŸäº›è´§ç‰©æˆä¸ºâ€œçˆ†æ¬¾â€äº†ï¼Œå¯ä»¥å¯¹ä¸€äº›ä¸»æ‰“å•†å“çš„ç¼“å­˜ç›´æ¥è®¾ç½®ä¸ºæ°¸ä¸è¿‡æœŸã€‚å³ä¾¿æŸäº›å•†å“è‡ªå·±å‘é…µæˆäº†çˆ†æ¬¾ï¼Œä¹Ÿæ˜¯ç›´æ¥è®¾ä¸ºæ°¸ä¸è¿‡æœŸå°±å¥½äº†ã€‚mutex keyäº’æ–¥é”åŸºæœ¬ä¸Šæ˜¯ç”¨ä¸ä¸Šçš„ï¼Œæœ‰ä¸ªè¯å«åšå¤§é“è‡³ç®€ã€‚")]),t._v(" "),e("p",[e("strong",[t._v("ç¼“å­˜é™çº§")])]),t._v(" "),e("p",[t._v("å½“è®¿é—®é‡å‰§å¢ã€æœåŠ¡å‡ºç°é—®é¢˜ï¼ˆå¦‚å“åº”æ—¶é—´æ…¢æˆ–ä¸å“åº”ï¼‰æˆ–éæ ¸å¿ƒæœåŠ¡å½±å“åˆ°æ ¸å¿ƒæµç¨‹çš„æ€§èƒ½æ—¶ï¼Œä»ç„¶éœ€è¦ä¿è¯æœåŠ¡è¿˜æ˜¯å¯ç”¨çš„ï¼Œå³ä½¿æ˜¯æœ‰æŸæœåŠ¡ã€‚ç³»ç»Ÿå¯ä»¥æ ¹æ®ä¸€äº›å…³é”®æ•°æ®è¿›è¡Œè‡ªåŠ¨é™çº§ï¼Œä¹Ÿå¯ä»¥é…ç½®å¼€å…³å®ç°äººå·¥é™çº§ã€‚\né™çº§çš„æœ€ç»ˆç›®çš„æ˜¯ä¿è¯æ ¸å¿ƒæœåŠ¡å¯ç”¨ï¼Œå³ä½¿æ˜¯æœ‰æŸçš„ã€‚è€Œä¸”æœ‰äº›æœåŠ¡æ˜¯æ— æ³•é™çº§çš„ï¼ˆå¦‚åŠ å…¥è´­ç‰©è½¦ã€ç»“ç®—ï¼‰ã€‚\nä»¥å‚è€ƒæ—¥å¿—çº§åˆ«è®¾ç½®é¢„æ¡ˆï¼š\nï¼ˆ1ï¼‰ä¸€èˆ¬ï¼šæ¯”å¦‚æœ‰äº›æœåŠ¡å¶å°”å› ä¸ºç½‘ç»œæŠ–åŠ¨æˆ–è€…æœåŠ¡æ­£åœ¨ä¸Šçº¿è€Œè¶…æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨é™çº§ï¼›\nï¼ˆ2ï¼‰è­¦å‘Šï¼šæœ‰äº›æœåŠ¡åœ¨ä¸€æ®µæ—¶é—´å†…æˆåŠŸç‡æœ‰æ³¢åŠ¨ï¼ˆå¦‚åœ¨95~100%ä¹‹é—´ï¼‰ï¼Œå¯ä»¥è‡ªåŠ¨é™çº§æˆ–äººå·¥é™çº§ï¼Œå¹¶å‘é€å‘Šè­¦ï¼›\nï¼ˆ3ï¼‰é”™è¯¯ï¼šæ¯”å¦‚å¯ç”¨ç‡ä½äº90%ï¼Œæˆ–è€…æ•°æ®åº“è¿æ¥æ± è¢«æ‰“çˆ†äº†ï¼Œæˆ–è€…è®¿é—®é‡çªç„¶çŒ›å¢åˆ°ç³»ç»Ÿèƒ½æ‰¿å—çš„æœ€å¤§é˜€å€¼ï¼Œæ­¤æ—¶å¯ä»¥æ ¹æ®æƒ…å†µè‡ªåŠ¨é™çº§æˆ–è€…äººå·¥é™çº§ï¼›\nï¼ˆ4ï¼‰ä¸¥é‡é”™è¯¯ï¼šæ¯”å¦‚å› ä¸ºç‰¹æ®ŠåŸå› æ•°æ®é”™è¯¯äº†ï¼Œæ­¤æ—¶éœ€è¦ç´§æ€¥äººå·¥é™çº§ã€‚")]),t._v(" "),e("p",[t._v("æœåŠ¡é™çº§çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢RedisæœåŠ¡æ•…éšœï¼Œå¯¼è‡´æ•°æ®åº“è·Ÿç€ä¸€èµ·å‘ç”Ÿé›ªå´©é—®é¢˜ã€‚å› æ­¤ï¼Œå¯¹äºä¸é‡è¦çš„ç¼“å­˜æ•°æ®ï¼Œå¯ä»¥é‡‡å–æœåŠ¡é™çº§ç­–ç•¥ï¼Œä¾‹å¦‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åšæ³•å°±æ˜¯ï¼ŒRediså‡ºç°é—®é¢˜ï¼Œä¸å»æ•°æ®åº“æŸ¥è¯¢ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›é»˜è®¤å€¼ç»™ç”¨æˆ·ã€‚")]),t._v(" "),e("p",{attrs:{id:"å‡å¦‚æœ‰ä¸‡æ•°æ®é‡‡ç”¨ä½œä¸ºä¸­é—´ç¼“å­˜å–å…¶ä¸­çš„ä¸‡å¦‚ä½•ä¿è¯ä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®"}}),t._v(" "),e("h2",{attrs:{id:"_17ã€å‡å¦‚mysqlæœ‰1000ä¸‡æ•°æ®-é‡‡ç”¨redisä½œä¸ºä¸­é—´ç¼“å­˜-å–å…¶ä¸­çš„10ä¸‡-å¦‚ä½•ä¿è¯redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_17ã€å‡å¦‚mysqlæœ‰1000ä¸‡æ•°æ®-é‡‡ç”¨redisä½œä¸ºä¸­é—´ç¼“å­˜-å–å…¶ä¸­çš„10ä¸‡-å¦‚ä½•ä¿è¯redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®"}},[t._v("#")]),t._v(" 17ã€å‡å¦‚MySQLæœ‰1000ä¸‡æ•°æ®ï¼Œé‡‡ç”¨Redisä½œä¸ºä¸­é—´ç¼“å­˜ï¼Œå–å…¶ä¸­çš„10ä¸‡ï¼Œå¦‚ä½•ä¿è¯Redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ")]),t._v(" "),e("p",[t._v("å¯ä»¥ä½¿ç”¨Redisçš„"),e("strong",[t._v("æ•°æ®æ·˜æ±°ç­–ç•¥")]),t._v("ï¼ŒRedis å†…å­˜æ•°æ®é›†å¤§å°ä¸Šå‡åˆ°ä¸€å®šå¤§å°çš„æ—¶å€™ï¼Œå°±ä¼šæ–½è¡Œè¿™ç§ç­–ç•¥ã€‚å…·ä½“è¯´æ¥ï¼Œä¸»è¦æœ‰ 6ç§å†…å­˜æ·˜æ±°ç­–ç•¥ï¼š")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("voltile-lruï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°")])]),t._v(" "),e("li",[e("p",[t._v("volatile-ttlï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°")])]),t._v(" "),e("li",[e("p",[t._v("volatile-randomï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°")])]),t._v(" "),e("li",[e("p",[t._v("allkeys-lruï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°")])]),t._v(" "),e("li",[e("p",[t._v("allkeys-randomï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°")])]),t._v(" "),e("li",[e("p",[t._v("no-envictionï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®")]),t._v(" "),e("p",{attrs:{id:"æŒä¹…åŒ–æœºåˆ¶å¯ä»¥è¯´ä¸€è¯´å—"}})])]),t._v(" "),e("h2",{attrs:{id:"_18ã€redisæŒä¹…åŒ–æœºåˆ¶å¯ä»¥è¯´ä¸€è¯´å—"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_18ã€redisæŒä¹…åŒ–æœºåˆ¶å¯ä»¥è¯´ä¸€è¯´å—"}},[t._v("#")]),t._v(" 18ã€RedisæŒä¹…åŒ–æœºåˆ¶å¯ä»¥è¯´ä¸€è¯´å—ï¼Ÿ")]),t._v(" "),e("p",[t._v("Redisæ˜¯ä¸€ä¸ªæ”¯æŒæŒä¹…åŒ–çš„å†…å­˜æ•°æ®åº“ï¼Œé€šè¿‡æŒä¹…åŒ–æœºåˆ¶æŠŠå†…å­˜ä¸­çš„æ•°æ®åŒæ­¥åˆ°ç¡¬ç›˜æ–‡ä»¶æ¥ä¿è¯æ•°æ®æŒä¹…åŒ–ã€‚å½“Redisé‡å¯åé€šè¿‡æŠŠç¡¬ç›˜æ–‡ä»¶é‡æ–°åŠ è½½åˆ°å†…å­˜ï¼Œå°±èƒ½è¾¾åˆ°æ¢å¤æ•°æ®çš„ç›®çš„ã€‚")]),t._v(" "),e("p",[t._v("å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦æŒä¹…åŒ–æ•°æ®ä¹Ÿå°±æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥åˆ°ç¡¬ç›˜é‡Œé¢ï¼Œå¤§éƒ¨åˆ†åŸå› æ˜¯ä¸ºäº†ä¹‹åé‡ç”¨æ•°æ®ï¼ˆæ¯”å¦‚é‡å¯æœº å™¨ã€æœºå™¨æ•…éšœä¹‹åå›å¤æ•°æ®ï¼‰ï¼Œæˆ–è€…æ˜¯ä¸ºäº†é˜²æ­¢ç³»ç»Ÿæ•…éšœè€Œå°†æ•°æ®å¤‡ä»½åˆ°ä¸€ä¸ªè¿œç¨‹ä½ç½®ã€‚")]),t._v(" "),e("p",[t._v("å®ç°ï¼šå•ç‹¬åˆ›å»ºfork()ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå°†å½“å‰çˆ¶è¿›ç¨‹çš„æ•°æ®åº“æ•°æ®å¤åˆ¶åˆ°å­è¿›ç¨‹çš„å†…å­˜ä¸­ï¼Œç„¶åç”±å­è¿›ç¨‹å†™å…¥åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­ï¼ŒæŒä¹…åŒ–çš„è¿‡ç¨‹ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡çš„å¿«ç…§æ–‡ä»¶ï¼Œç„¶åå­è¿›ç¨‹é€€å‡ºï¼Œå†…å­˜é‡Šæ”¾ã€‚")]),t._v(" "),e("p",[e("strong",[t._v("ä»¥ä¸‹æœ‰ä¸¤ç§æŒä¹…åŒ–æœºåˆ¶")])]),t._v(" "),e("h3",{attrs:{id:"å¿«ç…§-snapshotting-æŒä¹…åŒ–-rdbæŒä¹…åŒ–"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¿«ç…§-snapshotting-æŒä¹…åŒ–-rdbæŒä¹…åŒ–"}},[t._v("#")]),t._v(" "),e("strong",[t._v("å¿«ç…§ï¼ˆsnapshottingï¼‰æŒä¹…åŒ–ï¼ˆRDBæŒä¹…åŒ–ï¼‰")])]),t._v(" "),e("p",[t._v("Rediså¯ä»¥é€šè¿‡åˆ›å»ºå¿«ç…§æ¥è·å¾—å­˜å‚¨åœ¨å†…å­˜é‡Œé¢çš„æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„å‰¯æœ¬ã€‚Redisåˆ›å»ºå¿«ç…§ä¹‹åï¼Œå¯ä»¥å¯¹å¿«ç…§è¿›è¡Œ å¤‡ä»½ï¼Œå¯ä»¥å°†å¿«ç…§å¤åˆ¶åˆ°å…¶ä»–æœåŠ¡å™¨ä»è€Œåˆ›å»ºå…·æœ‰ç›¸åŒæ•°æ®çš„æœåŠ¡å™¨å‰¯æœ¬ï¼ˆRedisä¸»ä»ç»“æ„ï¼Œä¸»è¦ç”¨æ¥æé«˜Redisæ€§ èƒ½ï¼‰ï¼Œè¿˜å¯ä»¥å°†å¿«ç…§ç•™åœ¨åŸåœ°ä»¥ä¾¿é‡å¯æœåŠ¡å™¨çš„æ—¶å€™ä½¿ç”¨ã€‚")]),t._v(" "),e("p",[t._v("å¿«ç…§æŒä¹…åŒ–æ˜¯Redisé»˜è®¤é‡‡ç”¨çš„æŒä¹…åŒ–æ–¹å¼ï¼Œåœ¨Redis.confé…ç½®æ–‡ä»¶ä¸­é»˜è®¤æœ‰æ­¤ä¸‹é…ç½®ï¼š")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("save "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("900")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#åœ¨900ç§’(15åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰1ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRediså°±ä¼šè‡ªåŠ¨è§¦å‘BGSAVEå‘½ä»¤")]),t._v("\nåˆ›å»ºå¿«ç…§ã€‚\n\nsave "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#åœ¨300ç§’(5åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰10ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRediså°±ä¼šè‡ªåŠ¨è§¦å‘BGSAVEå‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚")]),t._v("\n\nsave "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#åœ¨60ç§’(1åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰10000ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRediså°±ä¼šè‡ªåŠ¨è§¦å‘BGSAVEå‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚")]),t._v("\n")])])]),e("h3",{attrs:{id:"aof-append-only-file-æŒä¹…åŒ–"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aof-append-only-file-æŒä¹…åŒ–"}},[t._v("#")]),t._v(" "),e("strong",[t._v("AOFï¼ˆappend-only fileï¼‰æŒä¹…åŒ–")])]),t._v(" "),e("p",[t._v("ä¸å¿«ç…§æŒä¹…åŒ–ç›¸æ¯”ï¼ŒAOF"),e("strong",[t._v("æŒä¹…åŒ–çš„å®æ—¶æ€§æ›´å¥½")]),t._v("ï¼Œå› æ­¤å·²æˆä¸ºä¸»æµçš„æŒä¹…åŒ–æ–¹æ¡ˆã€‚é»˜è®¤æƒ…å†µä¸‹Redisæ²¡æœ‰å¼€å¯ AOFï¼ˆappend only ï¬leï¼‰æ–¹å¼çš„æŒä¹…åŒ–ï¼Œå¯ä»¥é€šè¿‡appendonlyå‚æ•°å¼€å¯ï¼š"),e("code",[t._v("appendonly yes")])]),t._v(" "),e("p",[t._v("å¼€å¯AOFæŒä¹…åŒ–åæ¯æ‰§è¡Œä¸€æ¡ä¼šæ›´æ”¹Redisä¸­çš„æ•°æ®çš„å‘½ä»¤ï¼ŒRediså°±ä¼šå°†è¯¥å‘½ä»¤å†™å…¥ç¡¬ç›˜ä¸­çš„AOFæ–‡ä»¶ã€‚AOFæ–‡ä»¶çš„ ä¿å­˜ä½ç½®å’ŒRDBæ–‡ä»¶çš„ä½ç½®ç›¸åŒï¼Œéƒ½æ˜¯é€šè¿‡dirå‚æ•°è®¾ç½®çš„ï¼Œé»˜è®¤çš„æ–‡ä»¶åæ˜¯appendonly.aofã€‚")]),t._v(" "),e("p",[t._v("åœ¨Redisçš„é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨ä¸‰ç§ä¸åŒçš„ AOF æŒä¹…åŒ–æ–¹å¼ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("appendfsync always "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#æ¯æ¬¡æœ‰æ•°æ®ä¿®æ”¹å‘ç”Ÿæ—¶éƒ½ä¼šå†™å…¥AOFæ–‡ä»¶,è¿™æ ·ä¼šä¸¥é‡é™ä½Redisçš„é€Ÿåº¦")]),t._v("\nappendfsync everysec  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#æ¯ç§’é’ŸåŒæ­¥ä¸€æ¬¡ï¼Œæ˜¾ç¤ºåœ°å°†å¤šä¸ªå†™å‘½ä»¤åŒæ­¥åˆ°ç¡¬ç›˜")]),t._v("\nappendfsync no  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è®©æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶è¿›è¡ŒåŒæ­¥")]),t._v("\n")])])]),e("p",[t._v("ä¸ºäº†å…¼é¡¾æ•°æ®å’Œå†™å…¥æ€§èƒ½ï¼Œç”¨æˆ·å¯ä»¥è€ƒè™‘ appendfsync everysecé€‰é¡¹ ï¼Œè®©Redisæ¯ç§’åŒæ­¥ä¸€æ¬¡AOFæ–‡ä»¶ï¼ŒRedisæ€§èƒ½ å‡ ä¹æ²¡å—åˆ°ä»»ä½•å½±å“ã€‚è€Œä¸”è¿™æ ·å³ä½¿å‡ºç°ç³»ç»Ÿå´©æºƒï¼Œç”¨æˆ·æœ€å¤šåªä¼šä¸¢å¤±ä¸€ç§’ä¹‹å†…äº§ç”Ÿçš„æ•°æ®ã€‚å½“ç¡¬ç›˜å¿™äºæ‰§è¡Œå†™å…¥æ“ä½œçš„æ—¶å€™ï¼ŒRedisè¿˜ä¼šä¼˜é›…çš„æ”¾æ…¢è‡ªå·±çš„é€Ÿåº¦ä»¥ä¾¿é€‚åº”ç¡¬ç›˜çš„æœ€å¤§å†™å…¥é€Ÿåº¦ã€‚")]),t._v(" "),e("p",[e("strong",[t._v("Redis 4.0 å¯¹äºæŒä¹…åŒ–æœºåˆ¶çš„ä¼˜åŒ–")])]),t._v(" "),e("p",[t._v("Redis 4.0 å¼€å§‹æ”¯æŒ RDB å’Œ AOF çš„æ··åˆæŒä¹…åŒ–ï¼ˆé»˜è®¤å…³é—­ï¼Œå¯ä»¥é€šè¿‡é…ç½®é¡¹ aof-use-rdb-preamble å¼€å¯ï¼‰ã€‚")]),t._v(" "),e("p",[t._v("å¦‚æœæŠŠæ··åˆæŒä¹…åŒ–æ‰“å¼€ï¼ŒAOF é‡å†™çš„æ—¶å€™å°±ç›´æ¥æŠŠ RDB çš„å†…å®¹å†™åˆ° AOF æ–‡ä»¶å¼€å¤´ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥ç»“åˆ RDB å’Œ AOF çš„ä¼˜ç‚¹, å¿«é€ŸåŠ è½½åŒæ—¶é¿å…ä¸¢å¤±è¿‡å¤šçš„æ•°æ®ã€‚å½“ç„¶ç¼ºç‚¹ä¹Ÿæ˜¯æœ‰çš„ï¼Œ AOF é‡Œé¢çš„ RDB éƒ¨åˆ†æ˜¯å‹ç¼©æ ¼å¼ä¸å†æ˜¯ AOF æ ¼å¼ï¼Œå¯è¯»æ€§è¾ƒå·®ã€‚")]),t._v(" "),e("p",{attrs:{id:"é‡å†™äº†è§£å—å¯ä»¥ç®€å•è¯´è¯´å—"}}),t._v(" "),e("h2",{attrs:{id:"_19ã€aofé‡å†™äº†è§£å—-å¯ä»¥ç®€å•è¯´è¯´å—"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_19ã€aofé‡å†™äº†è§£å—-å¯ä»¥ç®€å•è¯´è¯´å—"}},[t._v("#")]),t._v(" 19ã€AOFé‡å†™äº†è§£å—ï¼Ÿå¯ä»¥ç®€å•è¯´è¯´å—ï¼Ÿ")]),t._v(" "),e("p",[t._v("AOFé‡å†™å¯ä»¥äº§ç”Ÿä¸€ä¸ªæ–°çš„AOFæ–‡ä»¶ï¼Œè¿™ä¸ªæ–°çš„AOFæ–‡ä»¶å’ŒåŸæœ‰çš„AOFæ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®åº“çŠ¶æ€ä¸€æ ·ï¼Œ"),e("strong",[t._v("ä½†ä½“ç§¯æ›´å°")]),t._v("ã€‚")]),t._v(" "),e("p",[t._v("AOFé‡å†™æ˜¯ä¸€ä¸ªæœ‰æ­§ä¹‰çš„åå­—ï¼Œè¯¥åŠŸèƒ½æ˜¯é€šè¿‡è¯»å–æ•°æ®åº“ä¸­çš„"),e("strong",[t._v("é”®å€¼")]),t._v("å¯¹æ¥å®ç°çš„ï¼Œç¨‹åºæ— é¡»å¯¹ç°æœ‰AOFæ–‡ä»¶è¿›è¡Œä»»ä¼ºè¯» å…¥ã€åˆ†ææˆ–è€…å†™å…¥æ“ä½œã€‚")]),t._v(" "),e("p",[t._v("åœ¨æ‰§è¡Œ BGREWRITEAOF å‘½ä»¤æ—¶ï¼ŒRedis æœåŠ¡å™¨ä¼šç»´æŠ¤ä¸€ä¸ª AOF "),e("strong",[t._v("é‡å†™ç¼“å†²åŒº")]),t._v("ï¼Œè¯¥ç¼“å†²åŒºä¼šåœ¨å­è¿›ç¨‹åˆ›å»ºæ–°AOFæ–‡ä»¶æœŸé—´ï¼Œè®°å½•æœåŠ¡å™¨æ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ã€‚"),e("strong",[t._v("å½“å­è¿›ç¨‹å®Œæˆåˆ›å»ºæ–°AOFæ–‡ä»¶çš„å·¥ä½œä¹‹åï¼ŒæœåŠ¡å™¨ä¼šå°†é‡å†™ç¼“å†²åŒºä¸­çš„æ‰€æœ‰å†…å®¹ è¿½åŠ åˆ°æ–°AOFæ–‡ä»¶çš„æœ«å°¾ï¼Œä½¿å¾—æ–°æ—§ä¸¤ä¸ªAOFæ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®åº“çŠ¶æ€ä¸€è‡´")]),t._v("ã€‚æœ€åï¼ŒæœåŠ¡å™¨ç”¨æ–°çš„AOFæ–‡ä»¶æ›¿æ¢æ—§çš„ AOFæ–‡ä»¶ï¼Œä»¥æ­¤æ¥å®ŒæˆAOFæ–‡ä»¶é‡å†™æ“ä½œã€‚")]),t._v(" "),e("p",{attrs:{id:"æ˜¯å¦ä½¿ç”¨é›†ç¾¤é›†ç¾¤çš„åŸç†æ˜¯ä»€ä¹ˆ"}}),t._v(" "),e("h2",{attrs:{id:"_20ã€æ˜¯å¦ä½¿ç”¨è¿‡redisé›†ç¾¤-é›†ç¾¤çš„åŸç†æ˜¯ä»€ä¹ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_20ã€æ˜¯å¦ä½¿ç”¨è¿‡redisé›†ç¾¤-é›†ç¾¤çš„åŸç†æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" 20ã€æ˜¯å¦ä½¿ç”¨è¿‡Redisé›†ç¾¤ï¼Ÿé›†ç¾¤çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),e("p",[t._v("Redis Sentinelï¼ˆå“¨å…µï¼‰ç€çœ¼äºé«˜å¯ç”¨ï¼Œåœ¨masterå®•æœºæ—¶ä¼šè‡ªåŠ¨å°†slaveæå‡ä¸ºmasterï¼Œç»§ç»­æä¾›æœåŠ¡ã€‚")]),t._v(" "),e("p",[t._v("Sentinelï¼ˆå“¨å…µï¼‰å¯ä»¥ç›‘å¬é›†ç¾¤ä¸­çš„æœåŠ¡å™¨ï¼Œå¹¶åœ¨ä¸»æœåŠ¡å™¨è¿›å…¥ä¸‹çº¿çŠ¶æ€æ—¶ï¼Œè‡ªåŠ¨ä»æœåŠ¡å™¨ä¸­é€‰ä¸¾å‡ºæ–°çš„ä¸»æœåŠ¡å™¨ã€‚")]),t._v(" "),e("p",[t._v("Redis Clusterï¼ˆé›†ç¾¤ï¼‰ç€çœ¼äºæ‰©å±•æ€§ï¼Œåœ¨å•ä¸ªRediså†…å­˜ä¸è¶³æ—¶ï¼Œä½¿ç”¨Clusterè¿›è¡Œåˆ†ç‰‡å­˜å‚¨ã€‚")]),t._v(" "),e("p",{attrs:{id:"å¦‚ä½•è§£å†³çš„å¹¶å‘ç«äº‰é—®é¢˜"}})])}),[],!1,null,null,null);s.default=v.exports}}]);
